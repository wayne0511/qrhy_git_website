function cama_ecommerce_call_validator(t){$.getScript("http://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/jquery.validate.min.js",t)}function cama_ecommerce_payments(){$("#e-payments-types").find("form").each(function(){$(this).validate()})}function cama_checkout_actions(){if(!jQuery.fn.validate)return cama_ecommerce_call_validator(cama_checkout_actions);var i=$("#cama_checkout_view"),e=i.find(".stepwizard-row .stepwizard-step").bind("next_step",function(){var t=$(this).find("a"),e=$(this);return e.hasClass("active")||(t.removeClass("btn-default").addClass("btn-primary").parent().addClass("active").siblings().removeClass("active").find("a").removeClass("btn-primary").addClass("btn-default"),e.prevAll().find("a").add(t).removeAttr("disabled"),i.find(t.attr("href")).fadeIn().siblings().hide()),!1});e.find(".btn-circle").click(function(){return $(this).attr("disabled")||$(this).parent().trigger("next_step"),!1}),e.first().trigger("next_step"),i.find("#checkout_address_form").validate({submitHandler:function(t){return $(t).fadeTo("fast",.4),$.post($(t).attr("action"),$(t).serialize(),function(){e.filter(".active").next().trigger("next_step")}).complete(function(){$(t).fadeTo("fast",1),$(window).scrollTop($("#cama_checkout_view").offset().top)}).error(function(t){alert(t.responseText)}),!1}}),i.find("#checkout_address_form #billing_address input").blur(function(){i.find("#checkout_address_form #"+$(this).attr("id").replace("billing_address","shipping_address")).val($(this).val())}),i.find("#checkout_shipping_form").validate({submitHandler:function(t){return $(t).fadeTo("fast",.4),$.post($(t).attr("action"),$(t).serialize()+"&next_step=true",function(t){i.find("#step-3").html(t),e.last().trigger("next_step")}).complete(function(){$(t).fadeTo("fast",1)}).error(function(t){alert(t.responseText)}),!1}}),i.find("#shipping_methods").change(function(){var t=i.find("#checkout_shipping_form");t.fadeTo("fast",.4),$.post(t.attr("action"),t.serialize(),function(t){i.find("#product_details").html(t)}).complete(function(){t.fadeTo("fast",1)}).error(function(t){alert(t.responseText)})}).trigger("change"),i.find("#e_coupon_apply_box input:text").keydown(function(t){if(13==t.keyCode)return $(this).next().find("button").click(),!1}),i.find("#e_coupon_apply_box button").click(function(){var e=$(this),t=i.find("#checkout_shipping_form");t.fadeTo("fast",.4),$.post($("#e_coupon_apply_box").attr("data-href"),{code:i.find(".coupon-text").val(),authenticity_token:i.find("#e_coupon_apply_box").attr("data-token")},function(t){i.find("#product_details").html(t),e.closest("#coupon").html("")}).error(function(t){alert(t.responseText)}).complete(function(){t.fadeTo("fast",1)})}),i.find("#ec_copy").click(function(){return i.find("#shipping_address").find("input, select, textarea").each(function(){var t=$(this).attr("id").replace("shipping","billing");$(this).val($("#billing_address #"+t).val())}),!1})}