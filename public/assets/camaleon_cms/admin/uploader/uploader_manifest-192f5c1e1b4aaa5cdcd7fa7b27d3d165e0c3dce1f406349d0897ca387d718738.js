function open_modal(e){var t={title:"",content:null,url:null,show_footer:!1,mode:"inline",ajax_params:{},id:"ow_inline_modal",zindex:null,modal_size:"",type:"",modal_settings:{},on_submit:null,callback:function(){},on_close:function(){}};if((e=$.extend({},t,e)).id){var i=$("#"+e.id);if(i.length)return i.modal("show"),i}var a=$('<div id="'+e.id+'" class="modal fade modal-'+e.type+'"><div class="modal-dialog '+e.modal_size+'"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+e.title+'</h4></div><div class="modal-body"></div>'+(e.show_footer||e.on_submit?'<div class="modal-footer"> '+(e.on_submit?'<button type="button" class="btn btn-primary modal_submit" ><i class="fa fa-save"></i> '+I18n("button.save")+"</button>":"")+' <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-arrow-circle-down"></i> '+I18n("button.close")+"</button></div>":"")+"</div></div></div>");return a.on("hidden.bs.modal",function(t){e.on_close(a),$(t.currentTarget).attr("data-skip_destroy")||$(t.currentTarget).remove(),modal_fix_multiple()}),e.zindex&&a.css("z-index",e.zindex),e.on_submit&&a.find(".modal-footer .modal_submit").click(function(){e.on_submit(a)}),a.on("show.bs.modal",function(){a.find(".modal-title").text()||a.find(".modal-header .close").css("margin-top","-9px"),e.callback(a)}),"inline"==e.mode?(a.find(".modal-body").html(e.content),a.modal(e.modal_settings)):"iframe"==e.mode?(a.find(".modal-body").html('<iframe id="ow_inline_modal_iframe" style="min-height: 500px;" src="'+e.url+'" width="100%" frameborder=0></iframe>'),a.modal(e.modal_settings)):(showLoading(),$.get(e.url,e.ajax_params,function(t){a.find(".modal-body").html(t),hideLoading(),a.modal(e.modal_settings)})),a}function showLoading(){$.fn.customLoading("show")}function hideLoading(){$.fn.customLoading("hide")}!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(E){"use strict";function i(t){var e=t.data;t.isDefaultPrevented()||(t.preventDefault(),E(t.target).ajaxSubmit(e))}function a(t){var e=t.target,i=E(e);if(!i.is("[type=submit],[type=image]")){var a=i.closest("[type=submit]");if(0===a.length)return;e=a[0]}var r=this;if("image"==(r.clk=e).type)if(t.offsetX!==undefined)r.clk_x=t.offsetX,r.clk_y=t.offsetY;else if("function"==typeof E.fn.offset){var o=i.offset();r.clk_x=t.pageX-o.left,r.clk_y=t.pageY-o.top}else r.clk_x=t.pageX-e.offsetLeft,r.clk_y=t.pageY-e.offsetTop;setTimeout(function(){r.clk=r.clk_x=r.clk_y=null},100)}function z(){if(E.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var x={};x.fileapi=E("<input type='file'/>").get(0).files!==undefined,x.formdata=window.FormData!==undefined;var M=!!E.fn.prop;E.fn.attr2=function(){if(!M)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},E.fn.ajaxSubmit=function(L){function n(t){var e,i,a=E.param(t,L.traditional).split("&"),r=a.length,o=[];for(e=0;e<r;e++)a[e]=a[e].replace(/\+/g," "),i=a[e].split("="),o.push([decodeURIComponent(i[0]),decodeURIComponent(i[1])]);return o}function t(t){for(var i=new FormData,e=0;e<t.length;e++)i.append(t[e].name,t[e].value);if(L.extraData){var a=n(L.extraData);for(e=0;e<a.length;e++)a[e]&&i.append(a[e][0],a[e][1])}L.data=null;var r=E.extend(!0,{},E.ajaxSettings,L,{contentType:!1,processData:!1,cache:!1,type:B||"POST"});L.uploadProgress&&(r.xhr=function(){var t=E.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(t){var e=0,i=t.loaded||t.position,a=t.total;t.lengthComputable&&(e=Math.ceil(i/a*100)),L.uploadProgress(t,i,a,e)},!1),t}),r.data=null;var o=r.beforeSend;return r.beforeSend=function(t,e){L.formData?e.data=L.formData:e.data=i,o&&o.call(this,t,e)},E.ajax(r)}function e(t){function h(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(i){z("cannot get iframe.contentWindow document: "+i)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(i){z("cannot get iframe.contentDocument: "+i),e=t.document}return e}function e(){function i(){try{var t=h(g).readyState;z("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(i,50)}catch(e){z("Server abort: ",e," (",e.name,")"),p(y),w&&clearTimeout(w),w=undefined}}var t=F.attr2("target"),e=F.attr2("action"),a="multipart/form-data",r=F.attr("enctype")||F.attr("encoding")||a;c.setAttribute("target",d),B&&!/post/i.test(B)||c.setAttribute("method","POST"),e!=u.url&&c.setAttribute("action",u.url),u.skipEncodingOverride||B&&!/post/i.test(B)||F.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(w=setTimeout(function(){b=!0,p(x)},u.timeout));var o=[];try{if(u.extraData)for(var n in u.extraData)u.extraData.hasOwnProperty(n)&&(E.isPlainObject(u.extraData[n])&&u.extraData[n].hasOwnProperty("name")&&u.extraData[n].hasOwnProperty("value")?o.push(E('<input type="hidden" name="'+u.extraData[n].name+'">').val(u.extraData[n].value).appendTo(c)[0]):o.push(E('<input type="hidden" name="'+n+'">').val(u.extraData[n]).appendTo(c)[0]));u.iframeTarget||f.appendTo("body"),g.attachEvent?g.attachEvent("onload",p):g.addEventListener("load",p,!1),setTimeout(i,15);try{c.submit()}catch(l){var s=document.createElement("form").submit;s.apply(c)}}finally{c.setAttribute("action",e),c.setAttribute("enctype",r),t?c.setAttribute("target",t):F.removeAttr("target"),E(o).remove()}}function p(t){if(!v.aborted&&!k){if((D=h(g))||(z("cannot access response document"),t=y),t===x&&v)return v.abort("timeout"),void _.reject(v,"timeout");if(t==y&&v)return v.abort("server abort"),void _.reject(v,"error","server abort");if(D&&D.location.href!=u.iframeSrc||b){g.detachEvent?g.detachEvent("onload",p):g.removeEventListener("load",p,!1);var e,i="success";try{if(b)throw"timeout";var a="xml"==u.dataType||D.XMLDocument||E.isXMLDoc(D);if(z("isXml="+a),!a&&window.opera&&(null===D.body||!D.body.innerHTML)&&--$)return z("requeing onLoad callback, DOM not available"),void setTimeout(p,250);var r=D.body?D.body:D.documentElement;v.responseText=r?r.innerHTML:null,v.responseXML=D.XMLDocument?D.XMLDocument:D,a&&(u.dataType="xml"),v.getResponseHeader=function(t){return{"content-type":u.dataType}[t.toLowerCase()]},r&&(v.status=Number(r.getAttribute("status"))||v.status,v.statusText=r.getAttribute("statusText")||v.statusText);var o=(u.dataType||"").toLowerCase(),n=/(json|script|text)/.test(o);if(n||u.textarea){var s=D.getElementsByTagName("textarea")[0];if(s)v.responseText=s.value,v.status=Number(s.getAttribute("status"))||v.status,v.statusText=s.getAttribute("statusText")||v.statusText;else if(n){var l=D.getElementsByTagName("pre")[0],d=D.getElementsByTagName("body")[0];l?v.responseText=l.textContent?l.textContent:l.innerText:d&&(v.responseText=d.textContent?d.textContent:d.innerText)}}else"xml"==o&&!v.responseXML&&v.responseText&&(v.responseXML=T(v.responseText));try{C=S(v,o,u)}catch(c){i="parsererror",v.error=e=c||i}}catch(c){z("error caught: ",c),i="error",v.error=e=c||i}v.aborted&&(z("upload aborted"),i=null),v.status&&(i=200<=v.status&&v.status<300||304===v.status?"success":"error"),"success"===i?(u.success&&u.success.call(u.context,C,"success",v),_.resolve(v.responseText,"success",v),m&&E.event.trigger("ajaxSuccess",[v,u])):i&&(e===undefined&&(e=v.statusText),u.error&&u.error.call(u.context,v,i,e),_.reject(v,"error",e),m&&E.event.trigger("ajaxError",[v,u,e])),m&&E.event.trigger("ajaxComplete",[v,u]),m&&!--E.active&&E.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,v,i),k=!0,u.timeout&&clearTimeout(w),setTimeout(function(){u.iframeTarget?f.attr("src",u.iframeSrc):f.remove(),v.responseXML=null},100)}}}var i,a,u,m,d,f,g,v,r,o,b,w,c=F[0],_=E.Deferred();if(_.abort=function(t){v.abort(t)},t)for(a=0;a<j.length;a++)i=E(j[a]),M?i.prop("disabled",!1):i.removeAttr("disabled");if((u=E.extend(!0,{},E.ajaxSettings,L)).context=u.context||u,d="jqFormIO"+(new Date).getTime(),u.iframeTarget?(o=(f=E(u.iframeTarget)).attr2("name"))?d=o:f.attr2("name",d):(f=E('<iframe name="'+d+'" src="'+u.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),g=f[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var e="timeout"===t?"timeout":"aborted";z("aborting upload... "+e),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(i){}f.attr("src",u.iframeSrc),v.error=e,u.error&&u.error.call(u.context,v,e,t),m&&E.event.trigger("ajaxError",[v,u,e]),u.complete&&u.complete.call(u.context,v,e)}},(m=u.global)&&0==E.active++&&E.event.trigger("ajaxStart"),m&&E.event.trigger("ajaxSend",[v,u]),u.beforeSend&&!1===u.beforeSend.call(u.context,v,u))return u.global&&E.active--,_.reject(),_;if(v.aborted)return _.reject(),_;(r=c.clk)&&(o=r.name)&&!r.disabled&&(u.extraData=u.extraData||{},u.extraData[o]=r.value,"image"==r.type&&(u.extraData[o+".x"]=c.clk_x,u.extraData[o+".y"]=c.clk_y));var x=1,y=2,n=E("meta[name=csrf-token]").attr("content"),s=E("meta[name=csrf-param]").attr("content");s&&n&&(u.extraData=u.extraData||{},u.extraData[s]=n),u.forceSync?e():setTimeout(e,10);var C,D,k,$=50,T=E.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},l=E.parseJSON||function(t){return window.eval("("+t+")")},S=function(t,e,i){var a=t.getResponseHeader("content-type")||"",r="xml"===e||!e&&0<=a.indexOf("xml"),o=r?t.responseXML:t.responseText;return r&&"parsererror"===o.documentElement.nodeName&&E.error&&E.error("parsererror"),i&&i.dataFilter&&(o=i.dataFilter(o,e)),"string"==typeof o&&("json"===e||!e&&0<=a.indexOf("json")?o=l(o):("script"===e||!e&&0<=a.indexOf("javascript"))&&E.globalEval(o)),o};return _}if(!this.length)return z("ajaxSubmit: skipping submit process - no element selected"),this;var B,i,a,F=this;"function"==typeof L?L={success:L}:L===undefined&&(L={}),B=L.type||this.attr2("method"),(a=(a="string"==typeof(i=L.url||this.attr2("action"))?E.trim(i):"")||window.location.href||"")&&(a=(a.match(/^([^#]+)/)||[])[1]),L=E.extend(!0,{url:a,success:E.ajaxSettings.success,type:B||E.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},L);var r={};if(this.trigger("form-pre-serialize",[this,L,r]),r.veto)return z("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(L.beforeSerialize&&!1===L.beforeSerialize(this,L))return z("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var o=L.traditional;o===undefined&&(o=E.ajaxSettings.traditional);var s,j=[],l=this.formToArray(L.semantic,j);if(L.data&&(L.extraData=L.data,s=E.param(L.data,o)),L.beforeSubmit&&!1===L.beforeSubmit(l,this,L))return z("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[l,this,L,r]),r.veto)return z("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var d=E.param(l,o);s&&(d=d?d+"&"+s:s),"GET"==L.type.toUpperCase()?(L.url+=(0<=L.url.indexOf("?")?"&":"?")+d,L.data=null):L.data=d;var c=[];if(L.resetForm&&c.push(function(){F.resetForm()}),L.clearForm&&c.push(function(){F.clearForm(L.includeHidden)}),!L.dataType&&L.target){var h=L.success||function(){};c.push(function(t){var e=L.replaceTarget?"replaceWith":"html";E(L.target)[e](t).each(h,arguments)})}else L.success&&c.push(L.success);if(L.success=function(t,e,i){for(var a=L.context||this,r=0,o=c.length;r<o;r++)c[r].apply(a,[t,e,i||F,F])},L.error){var p=L.error;L.error=function(t,e,i){var a=L.context||this;p.apply(a,[t,e,i,F])}}if(L.complete){var u=L.complete;L.complete=function(t,e){var i=L.context||this;u.apply(i,[t,e,F])}}var m=0<E("input[type=file]:enabled",this).filter(function(){return""!==E(this).val()}).length,f="multipart/form-data",g=F.attr("enctype")==f||F.attr("encoding")==f,v=x.fileapi&&x.formdata;z("fileAPI :"+v);var b,w=(m||g)&&!v;!1!==L.iframe&&(L.iframe||w)?L.closeKeepAlive?E.get(L.closeKeepAlive,function(){b=e(l)}):b=e(l):b=(m||g)&&v?t(l):E.ajax(L),F.removeData("jqxhr").data("jqxhr",b);for(var _=0;_<j.length;_++)j[_]=null;return this.trigger("form-submit-notify",[this,L]),this},E.fn.ajaxForm=function(t){if((t=t||{}).delegation=t.delegation&&E.isFunction(E.fn.on),!t.delegation&&0===this.length){var e={s:this.selector,c:this.context};return!E.isReady&&e.s?(z("DOM not ready, queuing ajaxForm"),E(function(){E(e.s,e.c).ajaxForm(t)})):z("terminating; zero elements found by selector"+(E.isReady?"":" (DOM not ready)")),this}return t.delegation?(E(document).off("submit.form-plugin",this.selector,i).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,t,i).on("click.form-plugin",this.selector,t,a),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,i).bind("click.form-plugin",t,a)},E.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},E.fn.formToArray=function(t,e){var i=[];if(0===this.length)return i;var a,r,o,n,s,l,d,c,h=this[0],p=this.attr("id"),u=t?h.getElementsByTagName("*"):h.elements;if(u&&!/MSIE [678]/.test(navigator.userAgent)&&(u=E(u).get()),p&&(a=E(':input[form="'+p+'"]').get()).length&&(u=(u||[]).concat(a)),!u||!u.length)return i;for(r=0,d=u.length;r<d;r++)if((n=(l=u[r]).name)&&!l.disabled)if(t&&h.clk&&"image"==l.type)h.clk==l&&(i.push({name:n,value:E(l).val(),type:l.type}),i.push({name:n+".x",value:h.clk_x},{name:n+".y",value:h.clk_y}));else if((s=E.fieldValue(l,!0))&&s.constructor==Array)for(e&&e.push(l),o=0,c=s.length;o<c;o++)i.push({name:n,value:s[o]});else if(x.fileapi&&"file"==l.type){e&&e.push(l);var m=l.files;if(m.length)for(o=0;o<m.length;o++)i.push({name:n,value:m[o],type:l.type});else i.push({name:n,value:"",type:l.type})}else null!=s&&(e&&e.push(l),i.push({name:n,value:s,type:l.type,required:l.required}));if(!t&&h.clk){var f=E(h.clk),g=f[0];(n=g.name)&&!g.disabled&&"image"==g.type&&(i.push({name:n,value:f.val()}),i.push({name:n+".x",value:h.clk_x},{name:n+".y",value:h.clk_y}))}return i},E.fn.formSerialize=function(t){return E.param(this.formToArray(t))},E.fn.fieldSerialize=function(r){var o=[];return this.each(function(){var t=this.name;if(t){var e=E.fieldValue(this,r);if(e&&e.constructor==Array)for(var i=0,a=e.length;i<a;i++)o.push({name:t,value:e[i]});else null!=e&&o.push({name:this.name,value:e})}}),E.param(o)},E.fn.fieldValue=function(t){for(var e=[],i=0,a=this.length;i<a;i++){var r=this[i],o=E.fieldValue(r,t);null==o||o.constructor==Array&&!o.length||(o.constructor==Array?E.merge(e,o):e.push(o))}return e},E.fieldValue=function(t,e){var i=t.name,a=t.type,r=t.tagName.toLowerCase();if(e===undefined&&(e=!0),e&&(!i||t.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!t.checked||("submit"==a||"image"==a)&&t.form&&t.form.clk!=t||"select"==r&&-1==t.selectedIndex))return null;if("select"==r){var o=t.selectedIndex;if(o<0)return null;for(var n=[],s=t.options,l="select-one"==a,d=l?o+1:s.length,c=l?o:0;c<d;c++){var h=s[c];if(h.selected){var p=h.value;if(p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),l)return p;n.push(p)}}return n}return E(t).val()},E.fn.clearForm=function(t){return this.each(function(){E("input,select,textarea",this).clearFields(t)})},E.fn.clearFields=E.fn.clearInputs=function(i){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,e=this.tagName.toLowerCase();a.test(t)||"textarea"==e?this.value="":"checkbox"==t||"radio"==t?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==t?/MSIE/.test(navigator.userAgent)?E(this).replaceWith(E(this).clone(!0)):E(this).val(""):i&&(!0===i&&/hidden/.test(t)||"string"==typeof i&&E(this).is(i))&&(this.value="")})},E.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},E.fn.enable=function(t){return t===undefined&&(t=!0),this.each(function(){this.disabled=!t})},E.fn.selected=function(i){return i===undefined&&(i=!0),this.each(function(){var t=this.type;if("checkbox"==t||"radio"==t)this.checked=i;else if("option"==this.tagName.toLowerCase()){var e=E(this).parent("select");i&&e[0]&&"select-one"==e[0].type&&e.find("option").selected(!1),this.selected=i}})},E.fn.ajaxSubmit.debug=!1}),function(C){null==jQuery.fn.ajaxForm&&C.getScript(("https:"==document.location.protocol?"https://":"http://")+"malsup.github.io/jquery.form.js");var D={};D.fileapi=void 0!==C("<input type='file'/>").get(0).files,D.formdata=void 0!==window.FormData,C.fn.uploadFile=function(e){function i(){y||(y=!0,function t(){if(n.sequential||(n.sequentialCount=99999),0==h.length&&0==x.length)n.afterUploadAll&&n.afterUploadAll(l),y=!1;else{if(x.length<n.sequentialCount){var e=h.shift();null!=e&&(x.push(e),e.submit())}window.setTimeout(t,100)}}())}function a(i,a,t){t.on("dragenter",function(t){t.stopPropagation(),t.preventDefault(),C(this).addClass(a.dragDropHoverClass)}),t.on("dragover",function(t){t.stopPropagation(),t.preventDefault();var e=C(this);e.hasClass(a.dragDropContainerClass)&&!e.hasClass(a.dragDropHoverClass)&&e.addClass(a.dragDropHoverClass)}),t.on("drop",function(t){t.preventDefault(),C(this).removeClass(a.dragDropHoverClass),i.errorLog.html("");var e=t.originalEvent.dataTransfer.files;return!a.multiple&&1<e.length?void(a.showError&&C("<div class='"+a.errorClass+"'>"+a.multiDragErrorStr+"</div>").appendTo(i.errorLog)):void(0!=a.onSelect(e)&&p(a,i,e))}),t.on("dragleave",function(){C(this).removeClass(a.dragDropHoverClass)}),C(document).on("dragenter",function(t){t.stopPropagation(),t.preventDefault()}),C(document).on("dragover",function(t){t.stopPropagation(),t.preventDefault();var e=C(this);e.hasClass(a.dragDropContainerClass)||e.removeClass(a.dragDropHoverClass)}),C(document).on("drop",function(t){t.stopPropagation(),t.preventDefault(),C(this).removeClass(a.dragDropHoverClass)})}function m(t){var e="",i=t/1024;1024<parseInt(i)?e=(i/1024).toFixed(2)+" MB":e=i.toFixed(2)+" KB";return e}function f(t){var e,i,a=[],r=(a="string"==jQuery.type(t)?t.split("&"):C.param(t).split("&")).length,o=[];for(e=0;e<r;e++)a[e]=a[e].replace(/\+/g," "),i=a[e].split("="),o.push([decodeURIComponent(i[0]),decodeURIComponent(i[1])]);return o}function p(t,e,i){for(var a=0;a<i.length;a++)if(g(e,t,i[a].name))if(t.allowDuplicates||!v(e,i[a].name))if(-1!=t.maxFileSize&&i[a].size>t.maxFileSize)t.showError&&C("<div class='"+t.errorClass+"'><b>"+i[a].name+"</b> "+t.sizeErrorStr+m(t.maxFileSize)+"</div>").appendTo(e.errorLog);else if(-1!=t.maxFileCount&&e.selectedFiles>=t.maxFileCount)t.showError&&C("<div class='"+t.errorClass+"'><b>"+i[a].name+"</b> "+t.maxFileCountErrorStr+t.maxFileCount+"</div>").appendTo(e.errorLog);else{e.selectedFiles++,e.existingFileNames.push(i[a].name);var r=t,o=new FormData,n=t.fileName.replace("[]","");o.append(n,i[a]);var s=t.formData;if(s)for(var l=f(s),d=0;d<l.length;d++)l[d]&&o.append(l[d][0],l[d][1]);r.fileData=o;var c=new w(e,t),h="";h=t.showFileCounter?e.fileCounter+t.fileCounterStyle+i[a].name:i[a].name,t.showFileSize&&(h+=" ("+m(i[a].size)+")"),c.filename.html(h);var p=C("<form style='display:block; position:absolute;left: 150px;' class='"+e.formGroup+"' method='"+t.method+"' action='"+t.url+"' enctype='"+t.enctype+"'></form>");p.appendTo("body");var u=[];u.push(i[a].name),_(p,r,c,u,e,i[a]),e.fileCounter++}else t.showError&&C("<div class='"+t.errorClass+"'><b>"+i[a].name+"</b> "+t.duplicateErrorStr+"</div>").appendTo(e.errorLog);else t.showError&&C("<div class='"+t.errorClass+"'><b>"+i[a].name+"</b> "+t.extErrorStr+t.allowedTypes+"</div>").appendTo(e.errorLog)}function g(t,e,i){var a=e.allowedTypes.toLowerCase().split(/[\s,]+/g),r=i.split(".").pop().toLowerCase();return!("*"!=e.allowedTypes&&jQuery.inArray(r,a)<0)}function v(t,e){var i=!1;if(t.existingFileNames.length)for(var a=0;a<t.existingFileNames.length;a++)(t.existingFileNames[a]==e||n.duplicateStrict&&t.existingFileNames[a].toLowerCase()==e.toLowerCase())&&(i=!0);return i}function c(t,e){if(t.existingFileNames.length)for(var i=0;i<e.length;i++){var a=t.existingFileNames.indexOf(e[i]);-1!=a&&t.existingFileNames.splice(a,1)}}function r(t,e){if(t){e.show();var i=new FileReader;i.onload=function(t){e.attr("src",t.target.result)},i.readAsDataURL(t)}}function u(i,t){if(i.showFileCounter){var a=C(t.container).find(".ajax-file-upload-filename").length;t.fileCounter=a+1,C(t.container).find(".ajax-file-upload-filename").each(function(){var t=C(this).html().split(i.fileCounterStyle),e=(parseInt(t[0]),a+i.fileCounterStyle+t[1]);C(this).html(e),a--})}}function b(s,l,d,c){var t="ajax-upload-id-"+(new Date).getTime(),h=C("<form method='"+d.method+"' action='"+d.url+"' enctype='"+d.enctype+"'></form>"),e="<input type='file' id='"+t+"' name='"+d.fileName+"' accept='"+d.acceptFiles+"'/>";d.multiple&&(d.fileName.indexOf("[]")!=d.fileName.length-2&&(d.fileName+="[]"),e="<input type='file' id='"+t+"' name='"+d.fileName+"' accept='"+d.acceptFiles+"' multiple/>");var i=C(e).appendTo(h);i.change(function(){s.errorLog.html("");var t=(d.allowedTypes.toLowerCase().split(","),[]);if(this.files){for(o=0;o<this.files.length;o++)t.push(this.files[o].name);if(0==d.onSelect(this.files))return}else{var e=C(this).val(),i=[];if(t.push(e),!g(s,d,e))return void(d.showError&&C("<div class='"+d.errorClass+"'><b>"+e+"</b> "+d.extErrorStr+d.allowedTypes+"</div>").appendTo(s.errorLog));if(i.push({name:e,size:"NA"}),0==d.onSelect(i))return}if(u(d,s),c.unbind("click"),h.hide(),b(s,l,d,c),h.addClass(l),d.serialize&&D.fileapi&&D.formdata){h.removeClass(l);var a=this.files;h.remove(),p(d,s,a)}else{for(var r="",o=0;o<t.length;o++)r+=d.showFileCounter?s.fileCounter+d.fileCounterStyle+t[o]+"<br>":t[o]+"<br>",s.fileCounter++;if(-1!=d.maxFileCount&&s.selectedFiles+t.length>d.maxFileCount)return void(d.showError&&C("<div class='"+d.errorClass+"'><b>"+r+"</b> "+d.maxFileCountErrorStr+d.maxFileCount+"</div>").appendTo(s.errorLog));s.selectedFiles+=t.length;var n=new w(s,d);n.filename.html(r),_(h,d,n,t,s,null)}}),d.nestedForms?(h.css({margin:0,padding:0}),c.css({position:"relative",overflow:"hidden",cursor:"default"}),i.css({position:"absolute",cursor:"pointer",top:"0px",width:"100%",height:"100%",left:"0px","z-index":"100",opacity:"0.0",filter:"alpha(opacity=0)","-ms-filter":"alpha(opacity=0)","-khtml-opacity":"0.0","-moz-opacity":"0.0"}),h.appendTo(c)):(h.appendTo(C("body")),h.css({margin:0,padding:0,display:"block",position:"absolute",left:"-250px"}),-1!=navigator.appVersion.indexOf("MSIE ")?c.attr("for",t):c.click(function(){i.click()}))}function o(t,e){return this.statusbar=C("<div class='ajax-file-upload-statusbar'></div>").width(e.statusBarWidth),this.preview=C("<img class='ajax-file-upload-preview' />").width(e.previewWidth).height(e.previewHeight).appendTo(this.statusbar).hide(),this.filename=C("<div class='ajax-file-upload-filename'></div>").appendTo(this.statusbar),this.progressDiv=C("<div class='ajax-file-upload-progress'>").appendTo(this.statusbar).hide(),this.progressbar=C("<div class='ajax-file-upload-bar'></div>").appendTo(this.progressDiv),this.abort=C("<div>"+e.abortStr+"</div>").appendTo(this.statusbar).hide(),this.cancel=C("<div>"+e.cancelStr+"</div>").appendTo(this.statusbar).hide(),this.done=C("<div>"+e.doneStr+"</div>").appendTo(this.statusbar).hide(),this.download=C("<div>"+e.downloadStr+"</div>").appendTo(this.statusbar).hide(),this.del=C("<div>"+e.deletelStr+"</div>").appendTo(this.statusbar).hide(),this.abort.addClass("ajax-file-upload-red"),this.done.addClass("ajax-file-upload-green"),this.download.addClass("ajax-file-upload-green"),this.cancel.addClass("ajax-file-upload-red"),this.del.addClass("ajax-file-upload-red"),this}function w(t,e){var i=null;return(i=e.customProgressBar?new e.customProgressBar(t,e):new o(t,e)).abort.addClass(t.formGroup),i.abort.addClass(e.abortButtonClass),i.cancel.addClass(t.formGroup),i.cancel.addClass(e.cancelButtonClass),e.extraHTML&&(i.extraHTML=C("<div class='extrahtml'>"+e.extraHTML()+"</div>").insertAfter(i.filename)),"bottom"==e.uploadQueuOrder?C(t.container).append(i.statusbar):C(t.container).prepend(i.statusbar),i}function _(o,n,s,l,d,t){var e={cache:!1,contentType:!1,processData:!1,forceSync:!1,type:n.method,data:n.formData,formData:n.fileData,dataType:n.returnType,beforeSubmit:function(t,e,i){if(0!=n.onSubmit.call(this,l)){if(n.dynamicFormData){var a=f(n.dynamicFormData());if(a)for(var r=0;r<a.length;r++)a[r]&&(null!=n.fileData?i.formData.append(a[r][0],a[r][1]):i.data[a[r][0]]=a[r][1])}return n.extraHTML&&C(s.extraHTML).find("input,select,textarea").each(function(){null!=n.fileData?i.formData.append(C(this).attr("name"),C(this).val()):i.data[C(this).attr("name")]=C(this).val()}),!0}return s.statusbar.append("<div class='"+n.errorClass+"'>"+n.uploadErrorStr+"</div>"),s.cancel.show(),o.remove(),s.cancel.click(function(){h.splice(h.indexOf(o),1),c(d,l),s.statusbar.remove(),n.onCancel.call(d,l,s),d.selectedFiles-=l.length,u(n,d)}),!1},beforeSend:function(t){s.progressDiv.show(),s.cancel.hide(),s.done.hide(),n.showAbort&&(s.abort.show(),s.abort.click(function(){c(d,l),t.abort(),d.selectedFiles-=l.length,n.onAbort.call(d,l,s)})),s.progressbar.width(D.formdata?"1%":"5%")},uploadProgress:function(t,e,i,a){98<a&&(a=98);var r=a+"%";1<a&&s.progressbar.width(r),n.showProgress&&(s.progressbar.html(r),s.progressbar.css("text-align","center"))},success:function(t,e,i){if(s.cancel.remove(),x.pop(),"json"==n.returnType&&"object"==C.type(t)&&t.hasOwnProperty(n.customErrorKeyStr)){s.abort.hide();var a=t[n.customErrorKeyStr];return n.onError.call(this,l,200,a,s),n.showStatusAfterError?(s.progressDiv.hide(),s.statusbar.append("<span class='"+n.errorClass+"'>ERROR: "+a+"</span>")):(s.statusbar.hide(),s.statusbar.remove()),d.selectedFiles-=l.length,void o.remove()}d.responses.push(t),s.progressbar.width("100%"),n.showProgress&&(s.progressbar.html("100%"),s.progressbar.css("text-align","center")),s.abort.hide(),n.onSuccess.call(this,l,t,i,s),n.showStatusAfterSuccess?(n.showDone?(s.done.show(),s.done.click(function(){s.statusbar.hide("slow"),s.statusbar.remove()})):s.done.hide(),n.showDelete?(s.del.show(),s.del.click(function(){s.statusbar.hide().remove(),n.deleteCallback&&n.deleteCallback.call(this,t,s),d.selectedFiles-=l.length,u(n,d)})):s.del.hide()):(s.statusbar.hide("slow"),s.statusbar.remove()),n.showDownload&&(s.download.show(),s.download.click(function(){n.downloadCallback&&n.downloadCallback(t)})),o.remove()},error:function(t,e,i){s.cancel.remove(),x.pop(),s.abort.hide(),"abort"==t.statusText?(s.statusbar.hide("slow").remove(),u(n,d)):(n.onError.call(this,l,e,i,s),n.showStatusAfterError?(s.progressDiv.hide(),s.statusbar.append("<span class='"+n.errorClass+"'>ERROR: "+i+"</span>")):(s.statusbar.hide(),s.statusbar.remove()),d.selectedFiles-=l.length),o.remove()}};n.showPreview&&null!=t&&"image"==t.type.toLowerCase().split("/").shift()&&r(t,s.preview),n.autoSubmit?(o.ajaxForm(e),h.push(o),i()):(n.showCancel&&(s.cancel.show(),s.cancel.click(function(){h.splice(h.indexOf(o),1),c(d,l),o.remove(),s.statusbar.remove(),n.onCancel.call(d,l,s),d.selectedFiles-=l.length,u(n,d)})),o.ajaxForm(e))}var n=C.extend({url:"",method:"POST",enctype:"multipart/form-data",returnType:null,allowDuplicates:!0,duplicateStrict:!1,allowedTypes:"*",acceptFiles:"*",fileName:"file",formData:!1,dynamicFormData:!1,maxFileSize:-1,maxFileCount:-1,multiple:!0,dragDrop:!0,autoSubmit:!0,showCancel:!0,showAbort:!0,showDone:!1,showDelete:!1,showError:!0,showStatusAfterSuccess:!0,showStatusAfterError:!0,showFileCounter:!0,fileCounterStyle:"). ",showFileSize:!0,showProgress:!1,nestedForms:!0,showDownload:!1,onLoad:function(){},onSelect:function(){return!0},onSubmit:function(){},onSuccess:function(){},onError:function(){},onCancel:function(){},onAbort:function(){},downloadCallback:!1,deleteCallback:!1,afterUploadAll:!1,serialize:!0,sequential:!1,sequentialCount:2,customProgressBar:!1,abortButtonClass:"ajax-file-upload-abort",cancelButtonClass:"ajax-file-upload-cancel",dragDropContainerClass:"ajax-upload-dragdrop",dragDropHoverClass:"state-hover",errorClass:"ajax-file-upload-error",uploadButtonClass:"ajax-file-upload",dragDropStr:"<span><b>Drag & Drop Files</b></span>",uploadStr:"Upload",abortStr:"Abort",cancelStr:"Cancel",deletelStr:"Delete",doneStr:"Done",multiDragErrorStr:"Multiple File Drag & Drop is not allowed.",extErrorStr:"is not allowed. Allowed extensions: ",duplicateErrorStr:"is not allowed. File already exists.",sizeErrorStr:"is not allowed. Allowed Max size: ",uploadErrorStr:"Upload is not allowed",maxFileCountErrorStr:" is not allowed. Maximum allowed files are:",downloadStr:"Download",customErrorKeyStr:"jquery-upload-file-error",showQueueDiv:!1,statusBarWidth:400,dragdropWidth:400,showPreview:!1,previewHeight:"auto",previewWidth:"100%",extraHTML:!1,uploadQueuOrder:"top"},e);this.fileCounter=1,this.selectedFiles=0;var s="ajax-file-upload-"+(new Date).getTime();this.formGroup=s,this.errorLog=C("<div></div>"),this.responses=[],this.existingFileNames=[],D.formdata||(n.dragDrop=!1),D.formdata||(n.multiple=!1),C(this).html("");var l=this,d=C("<div>"+n.uploadStr+"</div>");C(d).addClass(n.uploadButtonClass),function t(){if(C.fn.ajaxForm){if(n.dragDrop){var e=C('<div class="'+n.dragDropContainerClass+'" style="vertical-align:top;"></div>').width(n.dragdropWidth);C(l).append(e),C(e).append(d),C(e).append(C(n.dragDropStr)),a(l,n,e)}else C(l).append(d);C(l).append(l.errorLog),l.container=n.showQueueDiv?C("#"+n.showQueueDiv):C("<div class='ajax-file-upload-container'></div>").insertAfter(C(l)),n.onLoad.call(this,l),b(l,s,n,d)}else window.setTimeout(t,10)}(),this.startUpload=function(){C("form").each(function(){C(this).hasClass(l.formGroup)&&h.push(C(this))}),1<=h.length&&i()},this.getFileCount=function(){return l.selectedFiles},this.stopUpload=function(){C("."+n.abortButtonClass).each(function(){C(this).hasClass(l.formGroup)&&C(this).click()}),C("."+n.cancelButtonClass).each(function(){C(this).hasClass(l.formGroup)&&C(this).click()})},this.cancelAll=function(){C("."+n.cancelButtonClass).each(function(){C(this).hasClass(l.formGroup)&&C(this).click()})},this.update=function(t){n=C.extend(n,t)},this.reset=function(t){l.fileCounter=1,l.selectedFiles=0,l.errorLog.html(""),0!=t&&l.container.html("")},this.remove=function(){l.container.html(""),C(l).remove()},this.createProgress=function(e,t,i){var a=new w(this,n);a.progressDiv.show(),a.progressbar.width("100%");var r="";r=n.showFileCounter?l.fileCounter+n.fileCounterStyle+e:e,n.showFileSize&&(r+=" ("+m(i)+")"),a.filename.html(r),l.fileCounter++,l.selectedFiles++,n.showPreview&&(a.preview.attr("src",t),a.preview.show()),n.showDownload&&(a.download.show(),a.download.click(function(){n.downloadCallback&&n.downloadCallback.call(l,[e])})),n.showDelete&&(a.del.show(),a.del.click(function(){a.statusbar.hide().remove();var t=[e];n.deleteCallback&&n.deleteCallback.call(this,t,a),l.selectedFiles-=1,u(n,l)}))},this.getResponses=function(){return this.responses};var h=[],x=[],y=!1;return this}}(jQuery),function(){window.cama_init_media=function(media_panel){var customFileData,file_data,media_files_panel,media_info,media_info_tab_info,media_link_tab_upload,p_upload,show_file;return media_info=media_panel.find(".media_file_info"),media_files_panel=media_panel.find(".media_browser_list"),media_info_tab_info=media_panel.find(".media_file_info_col .nav-tabs .link_media_info"),media_link_tab_upload=media_panel.find(".media_file_info_col .nav-tabs .link_media_upload"),file_data=function(item){var data;return data=item.data("eval-data")||eval("("+item.find(".data_value").val()+")"),item.data("eval-data",data),data},show_file=function(t){var n,e,i,a,r;if(t.addClass("selected").siblings().removeClass("selected"),n=file_data(t),media_info_tab_info.click(),r="<div class='p_thumb'></div><div class='p_label'><b>"+I18n("button.name")+": </b><br> <span>"+n.name+"</span></div><div class='p_body'><div style='overflow: auto;'><b>"+I18n("button.url")+":</b><br> <a target='_blank' href='"+n.url+"'>"+n.url+"</a></div><div><b>"+I18n("button.size")+":</b> <span>"+cama_humanFileSize(n.size)+"</span></div></div>",
window.callback_media_uploader&&(!media_panel.attr("data-formats")||media_panel.attr("data-formats")&&(0<=$.inArray(n.format,media_panel.attr("data-formats").split(","))||0<=$.inArray(n.url.split(".").pop().toLowerCase(),media_panel.attr("data-formats").split(","))))&&(r+="<div class='p_footer'><button class='btn btn-primary insert_btn'>"+I18n("button.insert")+"</button></div>"),media_info.html(r),media_info.find(".p_thumb").html(t.find(".thumb").html()),"image"===n.format&&(t.find(".edit_item")&&(i=$('<button type="button" class="pull-right btn btn-default" title="Edit"><i class="fa fa-pencil"></i></button>').click(function(){return t.find(".edit_item").trigger("click")})),media_info.find(".p_footer").append(i),e=function(){var t,e,i,a,r,o;if(o=parseInt(n.dimension.split("x")[0]),r=parseInt(n.dimension.split("x")[1]),media_info.find(".p_body").append("<div class='cdimension'><b>"+I18n("button.dimension")+": </b><span>"+o+"x"+r+"</span></div>"),media_panel.attr("data-dimension"))return(i=media_info.find(".p_footer .insert_btn")).prop("disabled",!0),e=parseInt(media_panel.attr("data-dimension").split("x")[0])||o,t=parseInt(media_panel.attr("data-dimension").split("x")[1])||r,media_info.find(".cdimension").append("<span style='color: black;'> ==> "+media_panel.attr("data-dimension")+"</span>"),e===o&&t===r?i.prop("disabled",!1):(media_info.find(".cdimension").css("color","red"),a=$("<button class='btn btn-info pull-right'><i class='fa fa-crop'></i> "+I18n("button.auto_crop")+"</button>").click(function(){var t;return(t=n.name.split("."))[t.length-2]+="_"+media_panel.attr("data-dimension"),$.fn.upload_url({url:n.url,name:t.join(".")})}),i.after(a))},!n.dimension&&media_panel.attr("data-dimension")?((a=new Image).onload=function(){return n.dimension=this.width+"x"+this.height,t.data("eval-data",n),e()},a.src=n.url):e()),window.callback_media_uploader)return media_info.find(".insert_btn").click(function(){return n.mime=n.type,window.callback_media_uploader(n),window.callback_media_uploader=null,media_panel.closest(".modal").modal("hide"),!1})},media_panel.on("click",".file_item",function(){return show_file($(this)),!1}).on("dblclick",".file_item",function(){var t;if((t=media_info.find(".insert_btn"))&&!t.attr("disabled")&&!t.attr("readonly"))return t.trigger("click")}),media_files_panel.scroll(function(){if(media_files_panel.attr("data-next-page")&&$(this).scrollTop()+$(this).outerHeight()===$(this)[0].scrollHeight)return media_panel.trigger("navigate_to",{paginate:!0,custom_params:{page:media_files_panel.attr("data-next-page")}})}),p_upload=media_panel.find(".cama_media_fileuploader"),customFileData=function(){var t;return(t=cama_media_get_custom_params()).skip_auto_crop=!0,t},p_upload.uploadFile({url:p_upload.attr("data-url"),fileName:"file_upload",sequential:!0,sequentialCount:1,uploadButtonClass:"btn btn-primary btn-block",dragDropStr:'<span style="display: block;"><b>'+p_upload.attr("data-dragDropStr")+"</b></span>",uploadStr:p_upload.attr("data-uploadStr"),dynamicFormData:customFileData,onSuccess:function(t,e,i,a){return 0<=e.search("media_item")?(media_panel.trigger("add_file",{item:e,selected:0===$(a.statusbar).siblings().not(".error_file_upload").length}),$(a.statusbar).remove()):$(a.statusbar).find(".ajax-file-upload-progress").html("<span style='color: red;'>"+e+"</span>")},onError:function(t,e,i,a){return $(a.statusbar).addClass("error_file_upload").find(".ajax-file-upload-filename").append(" <i class='fa fa-times btn btn-danger btn-xs' onclick='$(this).closest(\".ajax-file-upload-statusbar\").remove();'></i>")}}),media_panel.find(".media_folder_breadcrumb").on("click","a",function(){return media_panel.trigger("navigate_to",{folder:$(this).attr("data-path")}),!1}),media_panel.on("click",".folder_item",function(){var t;return t=media_panel.attr("data-folder")+"/"+$(this).attr("data-key"),0<=$(this).attr("data-key").search("/")&&(t=$(this).attr("data-key")),media_panel.trigger("navigate_to",{folder:t.replace(/\/{2,}/g,"/")})}),media_panel.bind("update_breadcrumb",function(){var t,e,i,a,r,o,n,s,l;for(a=[],t=[],r=o=0,n=(i="/"===(e=media_panel.attr("data-folder").replace("//","/"))||""===e?["/"]:e.split("/")).length;o<n;r=++o)"/"!==(s=l=i[r])&&""!==l||(s=I18n("button.root")),r===i.length-1?t.push("<li><span>"+s+"</span></li>"):(a.push(l),t.push("<li><a data-path='"+(a.join("/")||"/").replace(/\/{2,}/g,"/")+"' href='#'>"+s+"</a></li>"));return media_panel.find(".media_folder_breadcrumb").html(t.join(""))}).trigger("update_breadcrumb"),media_panel.bind("navigate_to",function(t,i){var e,a;return i.folder&&media_panel.attr("data-folder",i.folder),e=media_panel.attr("data-folder"),media_panel.trigger("update_breadcrumb"),a=cama_media_get_custom_params({partial:!0,folder:e}),i.paginate?a=media_panel.data("last_req_params")||a:(media_info.html(""),media_link_tab_upload.click()),media_panel.data("last_req_params",$.extend({},a,i.custom_params||{})),showLoading(),$.getJSON(media_panel.attr("data-url"),media_panel.data("last_req_params"),function(t){var e;return i.paginate?0<media_files_panel.children(".file_item").length?media_files_panel.append(t.html):1===(e=media_files_panel.children(".folder_item:last")).length?e.after(t.html):media_files_panel.append(t.html):media_files_panel.html(t.html),media_files_panel.attr("data-next-page",t.next_page),hideLoading()})}).bind("add_file",function(t,e){var i,a;return i=$(e.item).hide(),1===(a=media_files_panel.children(".folder_item:last")).length?a.after(i):media_files_panel.prepend(i),!0!==e.selected&&void 0!==e.selected||i.click(),media_files_panel.scrollTop(0),i.fadeIn(1500)}),media_panel.find("#cama_search_form").submit(function(){return media_panel.trigger("navigate_to",{custom_params:{search:$(this).find("input:text").val()}}),!1}),media_panel.find(".cam_media_reload").click(function(t){return media_panel.trigger("navigate_to",{custom_params:{cama_media_reload:$(this).attr("data-action")}}),t.preventDefault()}),media_panel.on("click","a.add_folder",function(){return open_modal({title:"New Folder",content:$("<form id='add_folder_form'><div><label for=''>"+I18n("button.folder")+": </label> <div class='input-group'><input name='folder' class='form-control required' placeholder='Folder name..'><span class='input-group-btn'><button class='btn btn-primary' type='submit'>"+I18n("button.create")+"</button></span></div></div> </form>"),callback:function(e){var t,i;return t=e.find(".btn-primary"),i=e.find("input").keyup(function(){return $(this).val()?t.removeAttr("disabled"):t.attr("disabled","true")}).trigger("keyup"),e.find("form").submit(function(){return showLoading(),$.post(media_panel.attr("data-url_actions"),cama_media_get_custom_params({folder:media_panel.attr("data-folder")+"/"+i.val(),media_action:"new_folder"}),function(t){return hideLoading(),e.modal("hide"),0<=t.search("folder_item")?(t=$(t),media_files_panel.append(t),t.click()):$.fn.alert({type:"error",content:t,title:"Error"})}),!1})},zindex:9999999}),!1}),media_panel.on("click","a.del_item, a.del_folder",function(){var e,t;return confirm(I18n("msg.delete_item"))&&(t=$(this),e=t.closest(".media_item"),showLoading(),$.post(media_panel.attr("data-url_actions"),cama_media_get_custom_params({folder:media_panel.attr("data-folder")+"/"+e.attr("data-key"),media_action:t.hasClass("del_folder")?"del_folder":"del_file"}),function(t){return hideLoading(),t?$.fn.alert({type:"error",content:t,title:I18n("button.error")}):(e.remove(),media_info.html(""))}).error(function(){return $.fn.alert({type:"error",content:I18n("msg.internal_error"),title:I18n("button.error")})})),!1}),media_panel.on("click",".edit_item",function(){var cropper,cropper_data,data,edit_callback,item,link;return link=$(this),item=link.closest(".media_item"),data=file_data(item),cropper=null,cropper_data=null,edit_callback=function(modal){var btn,cmd,field_height,field_width,icon,ref,save_btn,save_image;for(icon in field_width=modal.find(".export_image .with_image"),field_height=modal.find(".export_image .height_image"),save_image=function(t,e){return $.fn.upload_url({url:cropper.cropper("getCroppedCanvas",{width:field_width.val(),height:field_height.val()}).toDataURL("image/jpeg"),name:t,same_name:e,callback:function(){return modal.modal("hide")}})},ref={arrows:"('setDragMode', 'move')",crop:"('setDragMode', 'crop')","search-plus":"('zoom', 0.1)","search-minus":"('zoom', -0.1)","arrow-left":"('move', -10, 0)","arrow-right":"('move', 10, 0)","arrow-up":"('move', 0, -10)","arrow-down":"('move', 0, 10)","rotate-left":"('rotate', -45)","rotate-right":"('rotate', 45)","arrows-h":"('scaleX', -1)","arrows-v":"('scaleY', -1)",refresh:"('reset')"},ref)cmd=ref[icon],btn=$('<button type="button" class="btn btn-default" data-cmd="'+cmd+'"><i class="fa fa-'+icon+'"></i></button>'),modal.find(".editor_controls").append(btn),btn.click(function(){if(btn=$(this),cmd=btn.data("cmd"),"('scaleY', -1)"===cmd||"('scaleX', -1)"===cmd?btn.data("cmd",cmd.replace("-1","1")):"('scaleY', 1)"!==cmd&&"('scaleX', 1)"!==cmd||btn.data("cmd",cmd.replace("1","-1")),eval("cropper.cropper"+cmd),"('reset')"===cmd)return cropper.cropper("setData",cropper_data.data)});return save_btn=modal.find(".export_image").submit(function(){var t;return $(this).valid()&&(t=function(t){return t.find("img.preview").attr("src",cropper.cropper("getCroppedCanvas",{width:field_width.val(),height:field_height.val()}).toDataURL("image/jpeg")),t.find(".save_btn").click(function(){return save_image(data.name,!0),t.modal("hide"),item.remove()}),t.find("form").validate({submitHandler:function(){return save_image(t.find(".file_name").val()+"."+data.name.split(".").pop()),t.modal("hide"),!1}})},open_modal({zindex:999992,modal_size:"modal-lg",id:"media_preview_editted_image",content:'<div class="text-center" style="overflow: auto;"><img class="preview"></div><br><div class="row"><div class="col-md-4"><button class="btn save_btn btn-default">'+I18n("button.replace_image")+'</button></div><div class="col-md-8"><form class="input-group"><input type="text" class="form-control file_name required" name="file_name"><div class="input-group-btn"><button class="btn btn-primary" type="submit">'+I18n("button.save_new_image")+"</button></div></form></div></div>",callback:t})),!1}).validate(),field_width.change(function(){var t;if(!field_width.attr("readonly"))return t=modal.find(".cropper-crop-box"),field_height.val(parseInt(parseInt($(this).val())/t.width()*t.height()))}),showLoading(),modal.find("img.editable").load(function(){return setTimeout(function(){var t,e;return e=modal.find(".label_dimension"),cropper_data={data:{},minContainerHeight:450,modal:!0,crop:function(t){if(e.html(Math.round(t.width)+" x "+Math.round(t.height)),field_width.attr("readonly")||field_width.val(Math.round(t.width)),!field_height.attr("readonly"))return field_height.val(Math.round(t.height))},built:function(){return $.get(data.url).error(function(){return modal.find(".modal-body").html('<div class="alert alert-danger">'+I18n("msg.cors_error",'Please verify the following: <ul><li>If the image exist: %{url_img}</li> <li>Check if cors configuration are defined well, only for external images: S3, cloudfront(if you are using cloudfront).</li></ul><br> More information about CORS: <a href="%{url_blog}" target="_blank">here.</a>',{url_img:data.url,url_blog:"http://blog.celingest.com/en/2014/10/02/tutorial-using-cors-with-cloudfront-and-s3/"})+"</div>")})}},media_panel.attr("data-dimension")&&((t=media_panel.attr("data-dimension").split("x"))[0]&&(cropper_data.data.width=parseFloat(t[0].match(/\d+/)[0]),field_width.val(cropper_data.data.width),-1<t[0].search(/\?/)?field_width.attr("max",cropper_data.data.width):field_width.prop("readonly",!0)),t[1]&&(cropper_data.data.height=parseFloat(t[1].match(/\d+/)[0]),field_height.val(cropper_data.data.height),-1<t[1].search(/\?/)?field_height.attr("max",cropper_data.data.height):field_height.prop("readonly",!0)),t[0]&&-1===t[0].search(/\?/)&&t[1]&&-1===t[1].search(/\?/)&&(cropper_data.aspectRatio=cropper_data.data.width/cropper_data.data.height)),cropper=modal.find("img.editable").cropper(cropper_data),hideLoading()},300)})},open_modal({zindex:999991,id:"media_panel_editor_image",title:I18n("button.edit_image","Edit Image")+" - "+data.name+(media_panel.attr("data-dimension")?" <small><i>("+media_panel.attr("data-dimension")+")</i></small>":""),content:'<div><div class="editable_wrapper"><img style="max-width: 100%;" class="editable" id="media_editable_image" src="'+data.url+'"></div><div class="row" style="margin-top: 5px;"><div class="col-md-8"><div class="editor_controls btn-group"></div></div><div class="col-md-4"><form class="export_image"> <div class="input-group"><input class="form-control with_image data-error-place-parent required number" placeholder="Width"><span class="input-group-addon">x</span><input class="form-control height_image data-error-place-parent required number" placeholder="Height"> <span class="input-group-btn"><button class="btn btn-primary save_image" type="submit"><i class="fa fa-save"></i> '+I18n("button.save","Save Image")+'</button> </span> </div></form></div></div><!--span class="label label-default pull-right label_dimension"></span--></div>',callback:edit_callback,modal_size:"modal-lg"}),!1}),media_panel.find("#cama_media_external").submit(function(){return $(this).valid()&&$.fn.upload_url({url:$(this).find("input").val(),skip_auto_crop:!0,callback:function(){return media_panel.find("#cama_media_external")[0].reset()}}),!1}).validate()},window.cama_media_get_custom_params=function(custom_settings){var media_panel,r;return media_panel=$("#cama_media_gallery"),r=eval("("+media_panel.attr("data-extra-params")+")"),r.folder=media_panel.attr("data-folder"),custom_settings&&$.extend(r,custom_settings),r.folder=r.folder.replace(/\/{2,}/g,"/"),r},$(function(){return $.fn.upload_url=function(t){var e,i;return i=$("#cama_media_gallery"),e=cama_media_get_custom_params({media_action:"crop_url",onerror:function(t){return $.fn.alert({type:"error",content:t,title:I18n("msg.error_uploading")})}}),$.extend(e,t),e.onerror,delete e.onerror,showLoading(),$.post(i.attr("data-url_actions"),e,function(t){return hideLoading(),0<=t.search("media_item")?(i.trigger("add_file",{item:t}),e.callback?e.callback(t):void 0):$.fn.alert({type:"error",content:t,title:I18n("button.error")})}).error(function(){return $.fn.alert({type:"error",content:I18n("msg.internal_error"),title:I18n("button.error")})})}}),$(function(){return $.fn.upload_filemanager=function(e){return"null"===(e=e||{}).formats&&(e.formats=""),"null"===e.dimension&&(e.dimension=""),"null"===e.versions&&(e.versions=""),"null"===e.thumb_size&&(e.thumb_size=""),open_modal({title:e.title||I18n("msg.media_title"),id:"cama_modal_file_uploader",modal_size:"modal-lg",mode:"ajax",url:root_admin_url+"/media/ajax",ajax_params:{media_formats:e.formats,dimension:e.dimension,versions:e.versions,thumb_size:e.thumb_size,"private":e["private"]},callback:function(t){return e.selected&&(window.callback_media_uploader=e.selected),t.css("z-index",e.zindex||99999).children(".modal-dialog").css("width","90%")}})}}),window.cama_humanFileSize=function(t){var e,i;for(i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],e=0;1024<=t;)t/=1024,++e;return t.toFixed(1)+" "+i[e]}}.call(this),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(w){"use strict";function _(t){return"number"==typeof t&&!isNaN(t)}function s(t){return void 0===t}function a(t,e){var i=[];return _(e)&&i.push(e),i.slice.apply(t,i)}function r(t,e){var i=a(arguments,2);return function(){return t.apply(e,i.concat(a(arguments)))}}function n(t){var e=t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return e&&(e[1]!==y.protocol||e[2]!==y.hostname||e[3]!==y.port)}function l(t){var e="timestamp="+(new Date).getTime();return t+(-1===t.indexOf("?")?"?":"&")+e}function d(t){return t?' crossOrigin="'+t+'"':""}function i(t,e){var i;if(t.naturalWidth&&!gt)return e(t.naturalWidth,t.naturalHeight);(i=document.createElement("img")).onload=function(){e(this.width,this.height)},i.src=t.src}function m(t){var e=[],i=t.rotate,a=t.scaleX,r=t.scaleY;return _(i)&&0!==i&&e.push("rotate("+i+"deg)"),_(a)&&1!==a&&e.push("scaleX("+a+")"),_(r)&&1!==r&&e.push("scaleY("+r+")"),e.length?e.join(" "):"none"}function x(t,e){var i,a,r=_t(t.degree)%180,o=(90<r?180-r:r)*Math.PI/180,n=xt(o),s=yt(o),l=t.width,d=t.height,c=t.aspectRatio;return e?a=(i=l/(s+n/c))/c:(i=l*s+d*n,a=l*n+d*s),{width:i,height:a}}function v(t,e){var i,a,r,o=w("<canvas>")[0],n=o.getContext("2d"),s=0,l=0,d=e.naturalWidth,c=e.naturalHeight,h=e.rotate,p=e.scaleX,u=e.scaleY,m=_(p)&&_(u)&&(1!==p||1!==u),f=_(h)&&0!==h,g=f||m,v=d*_t(p||1),b=c*_t(u||1);return m&&(i=v/2,a=b/2),f&&(i=(v=(r=x({width:v,height:b,degree:h})).width)/2,a=(b=r.height)/2),o.width=v,o.height=b,g&&(s=-d/2,l=-c/2,n.save(),n.translate(i,a)),f&&n.rotate(h*Math.PI/180),m&&n.scale(p,u),n.drawImage(t,kt(s),kt(l),kt(d),kt(c)),g&&n.restore(),o}function u(t){var e=t.length,i=0,a=0;return e&&(w.each(t,function(t,e){i+=e.pageX,a+=e.pageY}),i/=e,a/=e),{pageX:i,pageY:a}}function p(t,e,i){var a,r="";for(i+=a=e;a<i;a++)r+=$t(t.getUint8(a));return r}function c(t){var e,i,a,r,o,n,s,l,d,c=new k(t),h=c.byteLength;if(255===c.getUint8(0)&&216===c.getUint8(1))for(l=2;l<h;){if(255===c.getUint8(l)&&225===c.getUint8(l+1)){n=l;break}l++}if(n&&(i=n+10,"Exif"===p(c,n+4,4)&&((r=18761===(o=c.getUint16(i)))||19789===o)&&42===c.getUint16(i+2,r)&&8<=(a=c.getUint32(i+4,r))&&(s=i+a)),s)for(h=c.getUint16(s,r),d=0;d<h;d++)if(l=s+12*d+2,274===c.getUint16(l,r)){l+=8,e=c.getUint16(l,r),gt&&c.setUint16(l,1,r);break}return e}function o(t){var e,i=t.replace(Z,""),a=atob(i),r=a.length,o=new C(r),n=new D(o);for(e=0;e<r;e++)n[e]=a.charCodeAt(e);return o}function h(t){var e,i=new D(t),a=i.length,r="";for(e=0;e<a;e++)r+=$t(i[e]);return"data:image/jpeg;base64,"+$(r)}function f(t,e){this.$element=w(t),this.options=w.extend({},f.DEFAULTS,w.isPlainObject(e)&&e),this.isLoaded=!1,this.isBuilt=!1,this.isCompleted=!1,this.isRotated=!1,this.isCropped=!1,this.isDisabled=!1,this.isReplaced=!1,this.isLimited=!1,this.wheeling=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}var g=w(window),b=w(document),y=window.location,t=window.navigator,C=window.ArrayBuffer,D=window.Uint8Array,k=window.DataView,$=window.btoa,T="cropper",S="cropper-modal",L="cropper-hide",B="cropper-hidden",F="cropper-invisible",j="cropper-move",E="cropper-crop",e="cropper-disabled",z="cropper-bg",M="mousedown touchstart pointerdown MSPointerDown",I="mousemove touchmove pointermove MSPointerMove",X="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",A="wheel mousewheel DOMMouseScroll",H="dblclick",O="load."+T,R="error."+T,P="resize."+T,W="build."+T,Y="built."+T,N="cropstart."+T,U="cropmove."+T,q="cropend."+T,Q="crop."+T,G="zoom."+T,K=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,V=/^data:/,Z=/^data:([^;]+);base64,/,J=/^data:image\/jpeg.*;base64,/,tt="preview",et="action",it="e",at="w",rt="s",ot="n",nt="se",st="sw",lt="ne",dt="nw",ct="all",ht="crop",pt="move",ut="zoom",mt="none",ft=w.isFunction(w("<canvas>")[0].getContext),gt=t&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(t.userAgent),vt=Number,bt=Math.min,wt=Math.max,_t=Math.abs,xt=Math.sin,yt=Math.cos,Ct=Math.sqrt,Dt=Math.round,kt=Math.floor,$t=String.fromCharCode;f.prototype={constructor:f,init:function(){var t,e=this.$element;if(e.is("img")){if(this.isImg=!0,this.originalUrl=t=e.attr("src"),!t)return;t=e.prop("src")}else e.is("canvas")&&ft&&(t=e[0].toDataURL());this.load(t)},trigger:function(t,e){var i=w.Event(t,e);return this.$element.trigger(i),i},load:function(t){var e,i,a=this.options,r=this.$element;if(t&&(r.one(W,a.build),!this.trigger(W).isDefaultPrevented())){if(this.url=t,this.image={},!a.checkOrientation||!C)return this.clone();if(e=w.proxy(this.read,this),V.test(t))return J.test(t)?e(o(t)):this.clone();(i=new XMLHttpRequest).onerror=i.onabort=w.proxy(function(){this.clone()},this),i.onload=function(){e(this.response)},a.checkCrossOrigin&&n(t)&&r.prop("crossOrigin")&&(t=l(t)),i.open("get",t),i.responseType="arraybuffer",i.send()}},read:function(t){var e=this.options,i=c(t),a=this.image,r=0,o=1,n=1;if(1<i)switch(this.url=h(t),i){case 2:o=-1;break;case 3:r=-180;break;case 4:n=-1;break;case 5:r=90,n=-1;break;case 6:r=90;break;case 7:r=90,o=-1;break;case 8:r=-90}e.rotatable&&(a.rotate=r),e.scalable&&(a.scaleX=o,a.scaleY=n),this.clone()},clone:function(){var t,e,i=this.options,a=this.$element,r=this.url,o="";i.checkCrossOrigin&&n(r)&&((o=a.prop("crossOrigin"))?t=r:(o="anonymous",t=l(r))),this.crossOrigin=o,this.crossOriginUrl=t,this.$clone=e=w("<img"+d(o)+' src="'+(t||r)+'">'),this.isImg?a[0].complete?this.start():a.one(O,w.proxy(this.start,this)):e.one(O,w.proxy(this.start,this)).one(R,w.proxy(this.stop,this)).addClass(L).insertAfter(a)},start:function(){var t=this.$element,e=this.$clone;this.isImg||(e.off(R,this.stop),t=e),i(t[0],w.proxy(function(t,e){w.extend(this.image,{naturalWidth:t,naturalHeight:e,aspectRatio:t/e}),this.isLoaded=!0,this.build()},this))},stop:function(){this.$clone.remove(),this.$clone=null},build:function(){var t,e,i,a=this.options,r=this.$element,o=this.$clone;this.isLoaded&&(this.isBuilt&&this.unbuild(),this.$container=r.parent(),this.$cropper=t=w(f.TEMPLATE),this.$canvas=t.find(".cropper-canvas").append(o),this.$dragBox=t.find(".cropper-drag-box"),this.$cropBox=e=t.find(".cropper-crop-box"),this.$viewBox=t.find(".cropper-view-box"),this.$face=i=e.find(".cropper-face"),r.addClass(B).after(t),this.isImg||o.removeClass(L),this.initPreview(),this.bind(),a.aspectRatio=wt(0,a.aspectRatio)||NaN,a.viewMode=wt(0,bt(3,Dt(a.viewMode)))||0,a.autoCrop?(this.isCropped=!0,a.modal&&this.$dragBox.addClass(S)):e.addClass(B),a.guides||e.find(".cropper-dashed").addClass(B),a.center||e.find(".cropper-center").addClass(B),a.cropBoxMovable&&i.addClass(j).data(et,ct),a.highlight||i.addClass(F),a.background&&t.addClass(z),a.cropBoxResizable||e.find(".cropper-line, .cropper-point").addClass(B),this.setDragMode(a.dragMode),this.render(),this.isBuilt=!0,this.setData(a.data),r.one(Y,a.built),this.completing=setTimeout(w.proxy(function(){this.trigger(Y),this.trigger(Q,this.getData()),this.isCompleted=!0},this),0))},unbuild:function(){this.isBuilt&&(this.isCompleted||clearTimeout(this.completing),this.isBuilt=!1,this.isCompleted=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.isCropped&&this.renderCropBox()},initContainer:function(){var t=this.options,e=this.$element,i=this.$container,a=this.$cropper;a.addClass(B),e.removeClass(B),a.css(this.container={width:wt(i.width(),vt(t.minContainerWidth)||200),height:wt(i.height(),vt(t.minContainerHeight)||100)}),e.addClass(B),a.removeClass(B)},initCanvas:function(){var t,e=this.options.viewMode,i=this.container,a=i.width,r=i.height,o=this.image,n=o.naturalWidth,s=o.naturalHeight,l=90===_t(o.rotate),d=l?s:n,c=l?n:s,h=d/c,p=a,u=r;a<r*h?3===e?p=r*h:u=a/h:3===e?u=a/h:p=r*h,(t={naturalWidth:d,naturalHeight:c,aspectRatio:h,width:p,height:u}).oldLeft=t.left=(a-p)/2,t.oldTop=t.top=(r-u)/2,this.canvas=t,this.isLimited=1===e||2===e,this.limitCanvas(!0,!0),this.initialImage=w.extend({},o),this.initialCanvas=w.extend({},t)},limitCanvas:function(t,e){var i,a,r,o,n=this.options,s=n.viewMode,l=this.container,d=l.width,c=l.height,h=this.canvas,p=h.aspectRatio,u=this.cropBox,m=this.isCropped&&u;t&&(i=vt(n.minCanvasWidth)||0,a=vt(n.minCanvasHeight)||0,s&&(1<s?(i=wt(i,d),a=wt(a,c),3===s&&(i<a*p?i=a*p:a=i/p)):i?i=wt(i,m?u.width:0):a?a=wt(a,m?u.height:0):m&&((i=u.width)<(a=u.height)*p?i=a*p:a=i/p)),i&&a?i<a*p?a=i/p:i=a*p:i?a=i/p:a&&(i=a*p),h.minWidth=i,h.minHeight=a,h.maxWidth=Infinity,h.maxHeight=Infinity),e&&(s?(r=d-h.width,o=c-h.height,h.minLeft=bt(0,r),h.minTop=bt(0,o),h.maxLeft=wt(0,r),h.maxTop=wt(0,o),m&&this.isLimited&&(h.minLeft=bt(u.left,u.left+u.width-h.width),h.minTop=bt(u.top,u.top+u.height-h.height),h.maxLeft=u.left,h.maxTop=u.top,2===s&&(h.width>=d&&(h.minLeft=bt(0,r),h.maxLeft=wt(0,r)),h.height>=c&&(h.minTop=bt(0,o),h.maxTop=wt(0,o))))):(h.minLeft=-h.width,h.minTop=-h.height,h.maxLeft=d,h.maxTop=c))},renderCanvas:function(t){var e,i,a=this.canvas,r=this.image,o=r.rotate,n=r.naturalWidth,s=r.naturalHeight;this.isRotated&&(this.isRotated=!1,(e=(i=x({width:r.width,height:r.height,degree:o})).width/i.height)!==a.aspectRatio&&(a.left-=(i.width-a.width)/2,a.top-=(i.height-a.height)/2,a.width=i.width,a.height=i.height,a.aspectRatio=e,a.naturalWidth=n,a.naturalHeight=s,o%180&&(i=x({width:n,height:s,degree:o}),a.naturalWidth=i.width,a.naturalHeight=i.height),this.limitCanvas(!0,!1))),(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=bt(wt(a.width,a.minWidth),a.maxWidth),a.height=bt(wt(a.height,a.minHeight),a.maxHeight),this.limitCanvas(!1,!0),a.oldLeft=a.left=bt(wt(a.left,a.minLeft),a.maxLeft),a.oldTop=a.top=bt(wt(a.top,a.minTop),a.maxTop),this.$canvas.css({width:a.width,height:a.height,left:a.left,top:a.top}),this.renderImage(),this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0),t&&this.output()},renderImage:function(t){var e,i=this.canvas,a=this.image;a.rotate&&(e=x({width:i.width,height:i.height,degree:a.rotate,aspectRatio:a.aspectRatio},!0)),w.extend(a,e?{width:e.width,height:e.height,left:(i.width-e.width)/2,top:(i.height-e.height)/2}:{width:i.width,height:i.height,left:0,top:0}),this.$clone.css({width:a.width,height:a.height,marginLeft:a.left,marginTop:a.top,transform:m(a)}),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvas,i=t.aspectRatio,a=vt(t.autoCropArea)||.8,r={width:e.width,height:e.height};i&&(e.height*i>e.width?r.height=r.width/i:r.width=r.height*i),this.cropBox=r,this.limitCropBox(!0,!0),r.width=bt(wt(r.width,r.minWidth),r.maxWidth),r.height=bt(wt(r.height,r.minHeight),r.maxHeight),r.width=wt(r.minWidth,r.width*a),r.height=wt(r.minHeight,r.height*a),r.oldLeft=r.left=e.left+(e.width-r.width)/2,r.oldTop=r.top=e.top+(e.height-r.height)/2,this.initialCropBox=w.extend({},r)},limitCropBox:function(t,e){var i,a,r,o,n=this.options,s=n.aspectRatio,l=this.container,d=l.width,c=l.height,h=this.canvas,p=this.cropBox,u=this.isLimited;t&&(i=vt(n.minCropBoxWidth)||0,a=vt(n.minCropBoxHeight)||0,i=bt(i,d),a=bt(a,c),r=bt(d,u?h.width:d),o=bt(c,u?h.height:c),s&&(i&&a?i<a*s?a=i/s:i=a*s:i?a=i/s:a&&(i=a*s),r<o*s?o=r/s:r=o*s),p.minWidth=bt(i,r),p.minHeight=bt(a,o),p.maxWidth=r,p.maxHeight=o),e&&(u?(p.minLeft=wt(0,h.left),p.minTop=wt(0,h.top),p.maxLeft=bt(d,h.left+h.width)-p.width,p.maxTop=bt(c,h.top+h.height)-p.height):(p.minLeft=0,p.minTop=0,p.maxLeft=d-p.width,p.maxTop=c-p.height))},renderCropBox:function(){var t=this.options,e=this.container,i=e.width,a=e.height,r=this.cropBox;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=bt(wt(r.width,r.minWidth),r.maxWidth),r.height=bt(wt(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.oldLeft=r.left=bt(wt(r.left,r.minLeft),r.maxLeft),r.oldTop=r.top=bt(wt(r.top,r.minTop),r.maxTop),t.movable&&t.cropBoxMovable&&this.$face.data(et,r.width===i&&r.height===a?pt:ct),this.$cropBox.css({width:r.width,height:r.height,left:r.left,top:r.top}),this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0),this.isDisabled||this.output()},output:function(){this.preview(),this.isCompleted&&this.trigger(Q,this.getData())},initPreview:function(){var t,e=d(this.crossOrigin),i=e?this.crossOriginUrl:this.url;this.$preview=w(this.options.preview),this.$clone2=t=w("<img"+e+' src="'+i+'">'),this.$viewBox.html(t),this.$preview.each(function(){var t=w(this);t.data(tt,{width:t.width(),height:t.height(),html:t.html()}),t.html("<img"+e+' src="'+i+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var t=w(this),e=t.data(tt);t.css({width:e.width,height:e.height}).html(e.html).removeData(tt)})},preview:function(){var s=this.image,t=this.canvas,e=this.cropBox,l=e.width,d=e.height,c=s.width,h=s.height,p=e.left-t.left-s.left,u=e.top-t.top-s.top;this.isCropped&&!this.isDisabled&&(this.$clone2.css({width:c,height:h,marginLeft:-p,marginTop:-u,transform:m(s)}),this.$preview.each(function(){var t=w(this),e=t.data(tt),i=e.width,a=e.height,r=i,o=a,n=1;l&&(o=d*(n=i/l)),d&&a<o&&(r=l*(n=a/d),o=a),t.css({width:r,height:o}).find("img").css({width:c*n,height:h*n,marginLeft:-p*n,marginTop:-u*n,transform:m(s)})}))},bind:function(){var t=this.options,e=this.$element,i=this.$cropper;w.isFunction(t.cropstart)&&e.on(N,t.cropstart),w.isFunction(t.cropmove)&&e.on(U,t.cropmove),w.isFunction(t.cropend)&&e.on(q,t.cropend),w.isFunction(t.crop)&&e.on(Q,t.crop),w.isFunction(t.zoom)&&e.on(G,t.zoom),i.on(M,w.proxy(this.cropStart,this)),t.zoomable&&t.zoomOnWheel&&i.on(A,w.proxy(this.wheel,this)),t.toggleDragModeOnDblclick&&i.on(H,w.proxy(this.dblclick,this)),b.on(I,this._cropMove=r(this.cropMove,this)).on(X,this._cropEnd=r(this.cropEnd,this)),t.responsive&&g.on(P,this._resize=r(this.resize,this))},unbind:function(){var t=this.options,e=this.$element,i=this.$cropper;w.isFunction(t.cropstart)&&e.off(N,t.cropstart),w.isFunction(t.cropmove)&&e.off(U,t.cropmove),w.isFunction(t.cropend)&&e.off(q,t.cropend),w.isFunction(t.crop)&&e.off(Q,t.crop),w.isFunction(t.zoom)&&e.off(G,t.zoom),i.off(M,this.cropStart),t.zoomable&&t.zoomOnWheel&&i.off(A,this.wheel),t.toggleDragModeOnDblclick&&i.off(H,this.dblclick),b.off(I,this._cropMove).off(X,this._cropEnd),t.responsive&&g.off(P,this._resize)},resize:function(){var i,a,r,t=this.options.restore,e=this.$container,o=this.container;!this.isDisabled&&o&&(1===(r=e.width()/o.width)&&e.height()===o.height||(t&&(i=this.getCanvasData(),a=this.getCropBoxData()),this.render(),t&&(this.setCanvasData(w.each(i,function(t,e){i[t]=e*r})),this.setCropBoxData(w.each(a,function(t,e){a[t]=e*r})))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass(E)?this.setDragMode(pt):this.setDragMode(ht))},wheel:function(t){var e=t.originalEvent||t,i=vt(this.options.wheelZoomRatio)||.1,a=1;this.isDisabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(w.proxy(function(){this.wheeling=!1},this),50),e.deltaY?a=0<e.deltaY?1:-1:e.wheelDelta?a=-e.wheelDelta/120:e.detail&&(a=0<e.detail?1:-1),this.zoom(-a*i,t)))},cropStart:function(t){var e,i,a=this.options,r=t.originalEvent,o=r&&r.touches,n=t;if(!this.isDisabled){if(o){if(1<(e=o.length)){if(!a.zoomable||!a.zoomOnTouch||2!==e)return;n=o[1],this.startX2=n.pageX,this.startY2=n.pageY,i=ut}n=o[0]}if(i=i||w(n.target).data(et),K.test(i)){if(this.trigger(N,{originalEvent:r,action:i}).isDefaultPrevented())return;t.preventDefault(),this.action=i,this.cropping=!1,this.startX=n.pageX||r&&r.pageX,this.startY=n.pageY||r&&r.pageY,i===ht&&(this.cropping=!0,this.$dragBox.addClass(S))}}},cropMove:function(t){var e,i=this.options,a=t.originalEvent,r=a&&a.touches,o=t,n=this.action;if(!this.isDisabled){if(r){if(1<(e=r.length)){if(!i.zoomable||!i.zoomOnTouch||2!==e)return;o=r[1],this.endX2=o.pageX,this.endY2=o.pageY}o=r[0]}if(n){if(this.trigger(U,{originalEvent:a,action:n}).isDefaultPrevented())return;t.preventDefault(),this.endX=o.pageX||a&&a.pageX,this.endY=o.pageY||a&&a.pageY,this.change(o.shiftKey,n===ut?t:null)}}},cropEnd:function(t){var e=t.originalEvent,i=this.action;this.isDisabled||i&&(t.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(S,this.isCropped&&this.options.modal)),this.action="",this.trigger(q,{originalEvent:e,action:i}))},change:function(t,e){var i,a,r,o,n,s,l,d=this.options.aspectRatio,c=this.action,h=this.container,p=this.canvas,u=this.cropBox,m=u.width,f=u.height,g=u.left,v=u.top,b=g+m,w=v+f,_=0,x=0,y=h.width,C=h.height,D=!0;switch(!d&&t&&(d=m&&f?m/f:1),this.isLimited&&(_=u.minLeft,x=u.minTop,y=_+bt(h.width,p.width,p.left+p.width),C=x+bt(h.height,p.height,p.top+p.height)),a={x:this.endX-this.startX,y:this.endY-this.startY},d&&(a.X=a.y*d,a.Y=a.x/d),c){case ct:g+=a.x,v+=a.y;break;case it:if(0<=a.x&&(y<=b||d&&(v<=x||C<=w))){D=!1;break}m+=a.x,d&&(f=m/d,v-=a.Y/2),m<0&&(c=at,m=0);break;case ot:if(a.y<=0&&(v<=x||d&&(g<=_||y<=b))){D=!1;break}f-=a.y,v+=a.y,d&&(m=f*d,g+=a.X/2),f<0&&(c=rt,f=0);break
;case at:if(a.x<=0&&(g<=_||d&&(v<=x||C<=w))){D=!1;break}m-=a.x,g+=a.x,d&&(f=m/d,v+=a.Y/2),m<0&&(c=it,m=0);break;case rt:if(0<=a.y&&(C<=w||d&&(g<=_||y<=b))){D=!1;break}f+=a.y,d&&(m=f*d,g-=a.X/2),f<0&&(c=ot,f=0);break;case lt:if(d){if(a.y<=0&&(v<=x||y<=b)){D=!1;break}f-=a.y,v+=a.y,m=f*d}else 0<=a.x?b<y?m+=a.x:a.y<=0&&v<=x&&(D=!1):m+=a.x,a.y<=0?x<v&&(f-=a.y,v+=a.y):(f-=a.y,v+=a.y);m<0&&f<0?(c=st,m=f=0):m<0?(c=dt,m=0):f<0&&(c=nt,f=0);break;case dt:if(d){if(a.y<=0&&(v<=x||g<=_)){D=!1;break}f-=a.y,v+=a.y,m=f*d,g+=a.X}else a.x<=0?_<g?(m-=a.x,g+=a.x):a.y<=0&&v<=x&&(D=!1):(m-=a.x,g+=a.x),a.y<=0?x<v&&(f-=a.y,v+=a.y):(f-=a.y,v+=a.y);m<0&&f<0?(c=nt,m=f=0):m<0?(c=lt,m=0):f<0&&(c=st,f=0);break;case st:if(d){if(a.x<=0&&(g<=_||C<=w)){D=!1;break}m-=a.x,g+=a.x,f=m/d}else a.x<=0?_<g?(m-=a.x,g+=a.x):0<=a.y&&C<=w&&(D=!1):(m-=a.x,g+=a.x),0<=a.y?w<C&&(f+=a.y):f+=a.y;m<0&&f<0?(c=lt,m=f=0):m<0?(c=nt,m=0):f<0&&(c=dt,f=0);break;case nt:if(d){if(0<=a.x&&(y<=b||C<=w)){D=!1;break}f=(m+=a.x)/d}else 0<=a.x?b<y?m+=a.x:0<=a.y&&C<=w&&(D=!1):m+=a.x,0<=a.y?w<C&&(f+=a.y):f+=a.y;m<0&&f<0?(c=dt,m=f=0):m<0?(c=st,m=0):f<0&&(c=lt,f=0);break;case pt:this.move(a.x,a.y),D=!1;break;case ut:this.zoom((r=_t(this.startX-this.startX2),o=_t(this.startY-this.startY2),n=_t(this.endX-this.endX2),s=_t(this.endY-this.endY2),l=Ct(r*r+o*o),(Ct(n*n+s*s)-l)/l),e),this.startX2=this.endX2,this.startY2=this.endY2,D=!1;break;case ht:if(!a.x||!a.y){D=!1;break}i=this.$cropper.offset(),g=this.startX-i.left,v=this.startY-i.top,m=u.minWidth,f=u.minHeight,0<a.x?c=0<a.y?nt:lt:a.x<0&&(g-=m,c=0<a.y?st:dt),a.y<0&&(v-=f),this.isCropped||(this.$cropBox.removeClass(B),this.isCropped=!0,this.isLimited&&this.limitCropBox(!0,!0))}D&&(u.width=m,u.height=f,u.left=g,u.top=v,this.action=c,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(S),this.$cropBox.removeClass(B)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=w.extend({},this.initialImage),this.canvas=w.extend({},this.initialCanvas),this.cropBox=w.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())},clear:function(){this.isCropped&&!this.isDisabled&&(w.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass(S),this.$cropBox.addClass(B))},replace:function(t,e){!this.isDisabled&&t&&(this.isImg&&this.$element.attr("src",t),e?(this.url=t,this.$clone.attr("src",t),this.isBuilt&&this.$preview.find("img").add(this.$clone2).attr("src",t)):(this.isImg&&(this.isReplaced=!0),this.options.data=null,this.load(t)))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass(e))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass(e))},destroy:function(){var t=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&t.attr("src",this.originalUrl),this.unbuild(),t.removeClass(B)):this.isImg?t.off(O,this.start):this.$clone&&this.$clone.remove(),t.removeData(T)},move:function(t,e){var i=this.canvas;this.moveTo(s(t)?t:i.left+vt(t),s(e)?e:i.top+vt(e))},moveTo:function(t,e){var i=this.canvas,a=!1;s(e)&&(e=t),t=vt(t),e=vt(e),this.isBuilt&&!this.isDisabled&&this.options.movable&&(_(t)&&(i.left=t,a=!0),_(e)&&(i.top=e,a=!0),a&&this.renderCanvas(!0))},zoom:function(t,e){var i=this.canvas;t=(t=vt(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,e)},zoomTo:function(t,e){var i,a,r,o,n,s=this.options,l=this.canvas,d=l.width,c=l.height,h=l.naturalWidth,p=l.naturalHeight;if(0<=(t=vt(t))&&this.isBuilt&&!this.isDisabled&&s.zoomable){if(a=h*t,r=p*t,e&&(i=e.originalEvent),this.trigger(G,{originalEvent:i,oldRatio:d/h,ratio:a/h}).isDefaultPrevented())return;i?(o=this.$cropper.offset(),n=i.touches?u(i.touches):{pageX:e.pageX||i.pageX||0,pageY:e.pageY||i.pageY||0},l.left-=(a-d)*((n.pageX-o.left-l.left)/d),l.top-=(r-c)*((n.pageY-o.top-l.top)/c)):(l.left-=(a-d)/2,l.top-=(r-c)/2),l.width=a,l.height=r,this.renderCanvas(!0)}},rotate:function(t){this.rotateTo((this.image.rotate||0)+vt(t))},rotateTo:function(t){_(t=vt(t))&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=t%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(t,e){var i=this.image,a=!1;s(e)&&(e=t),t=vt(t),e=vt(e),this.isBuilt&&!this.isDisabled&&this.options.scalable&&(_(t)&&(i.scaleX=t,a=!0),_(e)&&(i.scaleY=e,a=!0),a&&this.renderImage(!0))},scaleX:function(t){var e=this.image.scaleY;this.scale(t,_(e)?e:1)},scaleY:function(t){var e=this.image.scaleX;this.scale(_(e)?e:1,t)},getData:function(i){var a,r,t=this.options,e=this.image,o=this.canvas,n=this.cropBox;return this.isBuilt&&this.isCropped?(r={x:n.left-o.left,y:n.top-o.top,width:n.width,height:n.height},a=e.width/e.naturalWidth,w.each(r,function(t,e){e/=a,r[t]=i?Dt(e):e})):r={x:0,y:0,width:0,height:0},t.rotatable&&(r.rotate=e.rotate||0),t.scalable&&(r.scaleX=e.scaleX||1,r.scaleY=e.scaleY||1),r},setData:function(t){var e,i,a,r=this.options,o=this.image,n=this.canvas,s={};w.isFunction(t)&&(t=t.call(this.element)),this.isBuilt&&!this.isDisabled&&w.isPlainObject(t)&&(r.rotatable&&_(t.rotate)&&t.rotate!==o.rotate&&(o.rotate=t.rotate,this.isRotated=e=!0),r.scalable&&(_(t.scaleX)&&t.scaleX!==o.scaleX&&(o.scaleX=t.scaleX,i=!0),_(t.scaleY)&&t.scaleY!==o.scaleY&&(o.scaleY=t.scaleY,i=!0)),e?this.renderCanvas():i&&this.renderImage(),a=o.width/o.naturalWidth,_(t.x)&&(s.left=t.x*a+n.left),_(t.y)&&(s.top=t.y*a+n.top),_(t.width)&&(s.width=t.width*a),_(t.height)&&(s.height=t.height*a),this.setCropBoxData(s))},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var i=this.canvas,a={};return this.isBuilt&&w.each(["left","top","width","height","naturalWidth","naturalHeight"],function(t,e){a[e]=i[e]}),a},setCanvasData:function(t){var e=this.canvas,i=e.aspectRatio;w.isFunction(t)&&(t=t.call(this.$element)),this.isBuilt&&!this.isDisabled&&w.isPlainObject(t)&&(_(t.left)&&(e.left=t.left),_(t.top)&&(e.top=t.top),_(t.width)?(e.width=t.width,e.height=t.width/i):_(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0))},getCropBoxData:function(){var t,e=this.cropBox;return this.isBuilt&&this.isCropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,a=this.cropBox,r=this.options.aspectRatio;w.isFunction(t)&&(t=t.call(this.$element)),this.isBuilt&&this.isCropped&&!this.isDisabled&&w.isPlainObject(t)&&(_(t.left)&&(a.left=t.left),_(t.top)&&(a.top=t.top),_(t.width)&&(e=!0,a.width=t.width),_(t.height)&&(i=!0,a.height=t.height),r&&(e?a.height=a.width/r:i&&(a.width=a.height*r)),this.renderCropBox())},getCroppedCanvas:function(t){var u,m,e,i,a,r,f,o,n,s,g;if(this.isBuilt&&ft)return this.isCropped?(w.isPlainObject(t)||(t={}),g=this.getData(),u=g.width,m=g.height,o=u/m,w.isPlainObject(t)&&(a=t.width,r=t.height,a&&r?f=a/u:a?(r=a/o,f=a/u):r&&(a=r*o,f=r/m)),e=kt(a||u),i=kt(r||m),(n=w("<canvas>")[0]).width=e,n.height=i,s=n.getContext("2d"),t.fillColor&&(s.fillStyle=t.fillColor,s.fillRect(0,0,e,i)),s.drawImage.apply(s,function(){var t,e,i,a,r,o,n=v(this.$clone[0],this.image),s=n.width,l=n.height,d=this.canvas,c=[n],h=g.x+d.naturalWidth*(_t(g.scaleX||1)-1)/2,p=g.y+d.naturalHeight*(_t(g.scaleY||1)-1)/2;return h<=-u||s<h?h=t=i=r=0:h<=0?(i=-h,t=r=bt(s,u+(h=0))):h<=s&&(i=0,t=r=bt(u,s-h)),t<=0||p<=-m||l<p?p=e=a=o=0:p<=0?(a=-p,e=o=bt(l,m+(p=0))):p<=l&&(a=0,e=o=bt(m,l-p)),c.push(kt(h),kt(p),kt(t),kt(e)),f&&(i*=f,a*=f,r*=f,o*=f),0<r&&0<o&&c.push(kt(i),kt(a),kt(r),kt(o)),c}.call(this)),n):v(this.$clone[0],this.image)},setAspectRatio:function(t){var e=this.options;this.isDisabled||s(t)||(e.aspectRatio=wt(0,t)||NaN,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(t){var e,i,a=this.options;this.isLoaded&&!this.isDisabled&&(e=t===ht,i=a.movable&&t===pt,t=e||i?t:mt,this.$dragBox.data(et,t).toggleClass(E,e).toggleClass(j,i),a.cropBoxMovable||this.$face.data(et,t).toggleClass(E,e).toggleClass(j,i))}},f.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},f.setDefaults=function(t){w.extend(f.DEFAULTS,t)},f.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',f.other=w.fn.cropper,w.fn.cropper=function(r){var o,n=a(arguments,1);return this.each(function(){var t,e,i=w(this),a=i.data(T);if(!a){if(/destroy/.test(r))return;t=w.extend({},i.data(),w.isPlainObject(r)&&r),i.data(T,a=new f(this,t))}"string"==typeof r&&w.isFunction(e=a[r])&&(o=e.apply(a,n))}),s(o)?this:o},w.fn.cropper.Constructor=f,w.fn.cropper.setDefaults=f.setDefaults,w.fn.cropper.noConflict=function(){return w.fn.cropper=f.other,this}}),jQuery(function(){$.fn.ajax_modal=function(a){return $(this).click(function(t){var e=$(this).attr("title"),i={title:(e=""==e?$(this).attr("data-original-title"):e)||$(this).data("title"),mode:"ajax",url:$(this).attr("href"),show_footer:$(this).data("show_footer")};$(this).attr("data-modal_size")&&(i.modal_size=$(this).attr("data-modal_size")),open_modal($.extend({},i,a)),t.preventDefault()}),this},$.fn.alert=function(t){hideLoading();var e={title:I18n("msg.updated_success"),type:"success",zindex:"99999999",id:"cama_alert_modal"};"error"==(t=$.extend(e,t||{})).type&&(t.type="danger"),"alert"==t.type&&(t.type="warning"),t.content||(t.content=t.title,t.title=""),open_modal(t)}}),jQuery(function(){$.fn.customLoading2=function(t){t||(t="show"),"string"==typeof t&&(t={state:t});var e=$.extend({},{percentage:100,state:"show"},t);"show"==e.state?0==$("body > #custom_loading").length?$("body").append('<div id="custom_loading" style="position: fixed; z-index: 99999; width: 100%; top: 0px; height: 15px;" class="progress"><div class="progress-bar progress-bar-striped active progress-bar-success" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: '+e.percentage+'%;"><span class="sr-only">45% Complete</span></div></div>'):$("body > #custom_loading").width(e.percentage):$("body > #custom_loading").remove()},$.fn.customLoading=function(t){t||(t="show"),"string"==typeof t&&(t={state:t});var e=$.extend({},{percentage:100,state:"show"},t);"show"==e.state?0==$("body > #cama_custom_loading").length?$("body").append('<div id="cama_custom_loading"><div class="back_spinner"></div><div class="loader_spinner"></div></div>'):$("body > #cama_custom_loading").width(e.percentage):$("body > #cama_custom_loading").remove()}});