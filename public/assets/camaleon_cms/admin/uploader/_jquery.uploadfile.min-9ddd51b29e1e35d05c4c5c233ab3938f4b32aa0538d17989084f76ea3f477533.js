!function(S){null==jQuery.fn.ajaxForm&&S.getScript(("https:"==document.location.protocol?"https://":"http://")+"malsup.github.io/jquery.form.js");var F={};F.fileapi=void 0!==S("<input type='file'/>").get(0).files,F.formdata=void 0!==window.FormData,S.fn.uploadFile=function(a){function t(){D||(D=!0,function e(){if(i.sequential||(i.sequentialCount=99999),0==p.length&&0==x.length)i.afterUploadAll&&i.afterUploadAll(n),D=!1;else{if(x.length<i.sequentialCount){var a=p.shift();null!=a&&(x.push(a),a.submit())}window.setTimeout(e,100)}}())}function r(t,r,e){e.on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),S(this).addClass(r.dragDropHoverClass)}),e.on("dragover",function(e){e.stopPropagation(),e.preventDefault();var a=S(this);a.hasClass(r.dragDropContainerClass)&&!a.hasClass(r.dragDropHoverClass)&&a.addClass(r.dragDropHoverClass)}),e.on("drop",function(e){e.preventDefault(),S(this).removeClass(r.dragDropHoverClass),t.errorLog.html("");var a=e.originalEvent.dataTransfer.files;return!r.multiple&&1<a.length?void(r.showError&&S("<div class='"+r.errorClass+"'>"+r.multiDragErrorStr+"</div>").appendTo(t.errorLog)):void(0!=r.onSelect(a)&&c(r,t,a))}),e.on("dragleave",function(){S(this).removeClass(r.dragDropHoverClass)}),S(document).on("dragenter",function(e){e.stopPropagation(),e.preventDefault()}),S(document).on("dragover",function(e){e.stopPropagation(),e.preventDefault();var a=S(this);a.hasClass(r.dragDropContainerClass)||a.removeClass(r.dragDropHoverClass)}),S(document).on("drop",function(e){e.stopPropagation(),e.preventDefault(),S(this).removeClass(r.dragDropHoverClass)})}function f(e){var a="",t=e/1024;1024<parseInt(t)?a=(t/1024).toFixed(2)+" MB":a=t.toFixed(2)+" KB";return a}function m(e){var a,t,r=[],o=(r="string"==jQuery.type(e)?e.split("&"):S.param(e).split("&")).length,s=[];for(a=0;a<o;a++)r[a]=r[a].replace(/\+/g," "),t=r[a].split("="),s.push([decodeURIComponent(t[0]),decodeURIComponent(t[1])]);return s}function c(e,a,t){for(var r=0;r<t.length;r++)if(v(a,e,t[r].name))if(e.allowDuplicates||!w(a,t[r].name))if(-1!=e.maxFileSize&&t[r].size>e.maxFileSize)e.showError&&S("<div class='"+e.errorClass+"'><b>"+t[r].name+"</b> "+e.sizeErrorStr+f(e.maxFileSize)+"</div>").appendTo(a.errorLog);else if(-1!=e.maxFileCount&&a.selectedFiles>=e.maxFileCount)e.showError&&S("<div class='"+e.errorClass+"'><b>"+t[r].name+"</b> "+e.maxFileCountErrorStr+e.maxFileCount+"</div>").appendTo(a.errorLog);else{a.selectedFiles++,a.existingFileNames.push(t[r].name);var o=e,s=new FormData,i=e.fileName.replace("[]","");s.append(i,t[r]);var l=e.formData;if(l)for(var n=m(l),d=0;d<n.length;d++)n[d]&&s.append(n[d][0],n[d][1]);o.fileData=s;var u=new C(a,e),p="";p=e.showFileCounter?a.fileCounter+e.fileCounterStyle+t[r].name:t[r].name,e.showFileSize&&(p+=" ("+f(t[r].size)+")"),u.filename.html(p);var c=S("<form style='display:block; position:absolute;left: 150px;' class='"+a.formGroup+"' method='"+e.method+"' action='"+e.url+"' enctype='"+e.enctype+"'></form>");c.appendTo("body");var h=[];h.push(t[r].name),b(c,o,u,h,a,t[r]),a.fileCounter++}else e.showError&&S("<div class='"+e.errorClass+"'><b>"+t[r].name+"</b> "+e.duplicateErrorStr+"</div>").appendTo(a.errorLog);else e.showError&&S("<div class='"+e.errorClass+"'><b>"+t[r].name+"</b> "+e.extErrorStr+e.allowedTypes+"</div>").appendTo(a.errorLog)}function v(e,a,t){var r=a.allowedTypes.toLowerCase().split(/[\s,]+/g),o=t.split(".").pop().toLowerCase();return!("*"!=a.allowedTypes&&jQuery.inArray(o,r)<0)}function w(e,a){var t=!1;if(e.existingFileNames.length)for(var r=0;r<e.existingFileNames.length;r++)(e.existingFileNames[r]==a||i.duplicateStrict&&e.existingFileNames[r].toLowerCase()==a.toLowerCase())&&(t=!0);return t}function u(e,a){if(e.existingFileNames.length)for(var t=0;t<a.length;t++){var r=e.existingFileNames.indexOf(a[t]);-1!=r&&e.existingFileNames.splice(r,1)}}function o(e,a){if(e){a.show();var t=new FileReader;t.onload=function(e){a.attr("src",e.target.result)},t.readAsDataURL(e)}}function h(t,e){if(t.showFileCounter){var r=S(e.container).find(".ajax-file-upload-filename").length;e.fileCounter=r+1,S(e.container).find(".ajax-file-upload-filename").each(function(){var e=S(this).html().split(t.fileCounterStyle),a=(parseInt(e[0]),r+t.fileCounterStyle+e[1]);S(this).html(a),r--})}}function g(l,n,d,u){var e="ajax-upload-id-"+(new Date).getTime(),p=S("<form method='"+d.method+"' action='"+d.url+"' enctype='"+d.enctype+"'></form>"),a="<input type='file' id='"+e+"' name='"+d.fileName+"' accept='"+d.acceptFiles+"'/>";d.multiple&&(d.fileName.indexOf("[]")!=d.fileName.length-2&&(d.fileName+="[]"),a="<input type='file' id='"+e+"' name='"+d.fileName+"' accept='"+d.acceptFiles+"' multiple/>");var t=S(a).appendTo(p);t.change(function(){l.errorLog.html("");var e=(d.allowedTypes.toLowerCase().split(","),[]);if(this.files){for(s=0;s<this.files.length;s++)e.push(this.files[s].name);if(0==d.onSelect(this.files))return}else{var a=S(this).val(),t=[];if(e.push(a),!v(l,d,a))return void(d.showError&&S("<div class='"+d.errorClass+"'><b>"+a+"</b> "+d.extErrorStr+d.allowedTypes+"</div>").appendTo(l.errorLog));if(t.push({name:a,size:"NA"}),0==d.onSelect(t))return}if(h(d,l),u.unbind("click"),p.hide(),g(l,n,d,u),p.addClass(n),d.serialize&&F.fileapi&&F.formdata){p.removeClass(n);var r=this.files;p.remove(),c(d,l,r)}else{for(var o="",s=0;s<e.length;s++)o+=d.showFileCounter?l.fileCounter+d.fileCounterStyle+e[s]+"<br>":e[s]+"<br>",l.fileCounter++;if(-1!=d.maxFileCount&&l.selectedFiles+e.length>d.maxFileCount)return void(d.showError&&S("<div class='"+d.errorClass+"'><b>"+o+"</b> "+d.maxFileCountErrorStr+d.maxFileCount+"</div>").appendTo(l.errorLog));l.selectedFiles+=e.length;var i=new C(l,d);i.filename.html(o),b(p,d,i,e,l,null)}}),d.nestedForms?(p.css({margin:0,padding:0}),u.css({position:"relative",overflow:"hidden",cursor:"default"}),t.css({position:"absolute",cursor:"pointer",top:"0px",width:"100%",height:"100%",left:"0px","z-index":"100",opacity:"0.0",filter:"alpha(opacity=0)","-ms-filter":"alpha(opacity=0)","-khtml-opacity":"0.0","-moz-opacity":"0.0"}),p.appendTo(u)):(p.appendTo(S("body")),p.css({margin:0,padding:0,display:"block",position:"absolute",left:"-250px"}),-1!=navigator.appVersion.indexOf("MSIE ")?u.attr("for",e):u.click(function(){t.click()}))}function s(e,a){return this.statusbar=S("<div class='ajax-file-upload-statusbar'></div>").width(a.statusBarWidth),this.preview=S("<img class='ajax-file-upload-preview' />").width(a.previewWidth).height(a.previewHeight).appendTo(this.statusbar).hide(),this.filename=S("<div class='ajax-file-upload-filename'></div>").appendTo(this.statusbar),this.progressDiv=S("<div class='ajax-file-upload-progress'>").appendTo(this.statusbar).hide(),this.progressbar=S("<div class='ajax-file-upload-bar'></div>").appendTo(this.progressDiv),this.abort=S("<div>"+a.abortStr+"</div>").appendTo(this.statusbar).hide(),this.cancel=S("<div>"+a.cancelStr+"</div>").appendTo(this.statusbar).hide(),this.done=S("<div>"+a.doneStr+"</div>").appendTo(this.statusbar).hide(),this.download=S("<div>"+a.downloadStr+"</div>").appendTo(this.statusbar).hide(),this.del=S("<div>"+a.deletelStr+"</div>").appendTo(this.statusbar).hide(),this.abort.addClass("ajax-file-upload-red"),this.done.addClass("ajax-file-upload-green"),this.download.addClass("ajax-file-upload-green"),this.cancel.addClass("ajax-file-upload-red"),this.del.addClass("ajax-file-upload-red"),this}function C(e,a){var t=null;return(t=a.customProgressBar?new a.customProgressBar(e,a):new s(e,a)).abort.addClass(e.formGroup),t.abort.addClass(a.abortButtonClass),t.cancel.addClass(e.formGroup),t.cancel.addClass(a.cancelButtonClass),a.extraHTML&&(t.extraHTML=S("<div class='extrahtml'>"+a.extraHTML()+"</div>").insertAfter(t.filename)),"bottom"==a.uploadQueuOrder?S(e.container).append(t.statusbar):S(e.container).prepend(t.statusbar),t}function b(s,i,l,n,d,e){var a={cache:!1,contentType:!1,processData:!1,forceSync:!1,type:i.method,data:i.formData,formData:i.fileData,dataType:i.returnType,beforeSubmit:function(e,a,t){if(0!=i.onSubmit.call(this,n)){if(i.dynamicFormData){var r=m(i.dynamicFormData());if(r)for(var o=0;o<r.length;o++)r[o]&&(null!=i.fileData?t.formData.append(r[o][0],r[o][1]):t.data[r[o][0]]=r[o][1])}return i.extraHTML&&S(l.extraHTML).find("input,select,textarea").each(function(){null!=i.fileData?t.formData.append(S(this).attr("name"),S(this).val()):t.data[S(this).attr("name")]=S(this).val()}),!0}return l.statusbar.append("<div class='"+i.errorClass+"'>"+i.uploadErrorStr+"</div>"),l.cancel.show(),s.remove(),l.cancel.click(function(){p.splice(p.indexOf(s),1),u(d,n),l.statusbar.remove(),i.onCancel.call(d,n,l),d.selectedFiles-=n.length,h(i,d)}),!1},beforeSend:function(e){l.progressDiv.show(),l.cancel.hide(),l.done.hide(),i.showAbort&&(l.abort.show(),l.abort.click(function(){u(d,n),e.abort(),d.selectedFiles-=n.length,i.onAbort.call(d,n,l)})),l.progressbar.width(F.formdata?"1%":"5%")},uploadProgress:function(e,a,t,r){98<r&&(r=98);var o=r+"%";1<r&&l.progressbar.width(o),i.showProgress&&(l.progressbar.html(o),l.progressbar.css("text-align","center"))},success:function(e,a,t){if(l.cancel.remove(),x.pop(),"json"==i.returnType&&"object"==S.type(e)&&e.hasOwnProperty(i.customErrorKeyStr)){l.abort.hide();var r=e[i.customErrorKeyStr];return i.onError.call(this,n,200,r,l),i.showStatusAfterError?(l.progressDiv.hide(),l.statusbar.append("<span class='"+i.errorClass+"'>ERROR: "+r+"</span>")):(l.statusbar.hide(),l.statusbar.remove()),d.selectedFiles-=n.length,void s.remove()}d.responses.push(e),l.progressbar.width("100%"),i.showProgress&&(l.progressbar.html("100%"),l.progressbar.css("text-align","center")),l.abort.hide(),i.onSuccess.call(this,n,e,t,l),i.showStatusAfterSuccess?(i.showDone?(l.done.show(),l.done.click(function(){l.statusbar.hide("slow"),l.statusbar.remove()})):l.done.hide(),i.showDelete?(l.del.show(),l.del.click(function(){l.statusbar.hide().remove(),i.deleteCallback&&i.deleteCallback.call(this,e,l),d.selectedFiles-=n.length,h(i,d)})):l.del.hide()):(l.statusbar.hide("slow"),l.statusbar.remove()),i.showDownload&&(l.download.show(),l.download.click(function(){i.downloadCallback&&i.downloadCallback(e)})),s.remove()},error:function(e,a,t){l.cancel.remove(),x.pop(),l.abort.hide(),"abort"==e.statusText?(l.statusbar.hide("slow").remove(),h(i,d)):(i.onError.call(this,n,a,t,l),i.showStatusAfterError?(l.progressDiv.hide(),l.statusbar.append("<span class='"+i.errorClass+"'>ERROR: "+t+"</span>")):(l.statusbar.hide(),l.statusbar.remove()),d.selectedFiles-=n.length),s.remove()}};i.showPreview&&null!=e&&"image"==e.type.toLowerCase().split("/").shift()&&o(e,l.preview),i.autoSubmit?(s.ajaxForm(a),p.push(s),t()):(i.showCancel&&(l.cancel.show(),l.cancel.click(function(){p.splice(p.indexOf(s),1),u(d,n),s.remove(),l.statusbar.remove(),i.onCancel.call(d,n,l),d.selectedFiles-=n.length,h(i,d)})),s.ajaxForm(a))}var i=S.extend({url:"",method:"POST",enctype:"multipart/form-data",returnType:null,allowDuplicates:!0,duplicateStrict:!1,allowedTypes:"*",acceptFiles:"*",fileName:"file",formData:!1,dynamicFormData:!1,maxFileSize:-1,maxFileCount:-1,multiple:!0,dragDrop:!0,autoSubmit:!0,showCancel:!0,showAbort:!0,showDone:!1,showDelete:!1,showError:!0,showStatusAfterSuccess:!0,showStatusAfterError:!0,showFileCounter:!0,fileCounterStyle:"). ",showFileSize:!0,showProgress:!1,nestedForms:!0,showDownload:!1,onLoad:function(){},onSelect:function(){return!0},onSubmit:function(){},onSuccess:function(){},onError:function(){},onCancel:function(){},onAbort:function(){},downloadCallback:!1,deleteCallback:!1,afterUploadAll:!1,serialize:!0,sequential:!1,sequentialCount:2,customProgressBar:!1,abortButtonClass:"ajax-file-upload-abort",cancelButtonClass:"ajax-file-upload-cancel",dragDropContainerClass:"ajax-upload-dragdrop",dragDropHoverClass:"state-hover",errorClass:"ajax-file-upload-error",uploadButtonClass:"ajax-file-upload",dragDropStr:"<span><b>Drag & Drop Files</b></span>",uploadStr:"Upload",abortStr:"Abort",cancelStr:"Cancel",deletelStr:"Delete",doneStr:"Done",multiDragErrorStr:"Multiple File Drag & Drop is not allowed.",extErrorStr:"is not allowed. Allowed extensions: ",duplicateErrorStr:"is not allowed. File already exists.",sizeErrorStr:"is not allowed. Allowed Max size: ",uploadErrorStr:"Upload is not allowed",maxFileCountErrorStr:" is not allowed. Maximum allowed files are:",downloadStr:"Download",customErrorKeyStr:"jquery-upload-file-error",showQueueDiv:!1,statusBarWidth:400,dragdropWidth:400,showPreview:!1,previewHeight:"auto",previewWidth:"100%",extraHTML:!1,uploadQueuOrder:"top"},a);this.fileCounter=1,this.selectedFiles=0;var l="ajax-file-upload-"+(new Date).getTime();this.formGroup=l,this.errorLog=S("<div></div>"),this.responses=[],this.existingFileNames=[],F.formdata||(i.dragDrop=!1),F.formdata||(i.multiple=!1),S(this).html("");var n=this,d=S("<div>"+i.uploadStr+"</div>");S(d).addClass(i.uploadButtonClass),function e(){if(S.fn.ajaxForm){if(i.dragDrop){var a=S('<div class="'+i.dragDropContainerClass+'" style="vertical-align:top;"></div>').width(i.dragdropWidth);S(n).append(a),S(a).append(d),S(a).append(S(i.dragDropStr)),r(n,i,a)}else S(n).append(d);S(n).append(n.errorLog),n.container=i.showQueueDiv?S("#"+i.showQueueDiv):S("<div class='ajax-file-upload-container'></div>").insertAfter(S(n)),i.onLoad.call(this,n),g(n,l,i,d)}else window.setTimeout(e,10)}(),this.startUpload=function(){S("form").each(function(){S(this).hasClass(n.formGroup)&&p.push(S(this))}),1<=p.length&&t()},this.getFileCount=function(){return n.selectedFiles},this.stopUpload=function(){S("."+i.abortButtonClass).each(function(){S(this).hasClass(n.formGroup)&&S(this).click()}),S("."+i.cancelButtonClass).each(function(){S(this).hasClass(n.formGroup)&&S(this).click()})},this.cancelAll=function(){S("."+i.cancelButtonClass).each(function(){S(this).hasClass(n.formGroup)&&S(this).click()})},this.update=function(e){i=S.extend(i,e)},this.reset=function(e){n.fileCounter=1,n.selectedFiles=0,n.errorLog.html(""),0!=e&&n.container.html("")},this.remove=function(){n.container.html(""),S(n).remove()},this.createProgress=function(a,e,t){var r=new C(this,i);r.progressDiv.show(),r.progressbar.width("100%");var o="";o=i.showFileCounter?n.fileCounter+i.fileCounterStyle+a:a,i.showFileSize&&(o+=" ("+f(t)+")"),r.filename.html(o),n.fileCounter++,n.selectedFiles++,i.showPreview&&(r.preview.attr("src",e),r.preview.show()),i.showDownload&&(r.download.show(),r.download.click(function(){i.downloadCallback&&i.downloadCallback.call(n,[a])})),i.showDelete&&(r.del.show(),r.del.click(function(){r.statusbar.hide().remove();var e=[a];i.deleteCallback&&i.deleteCallback.call(this,e,r),n.selectedFiles-=1,h(i,n)}))},this.getResponses=function(){return this.responses};var p=[],x=[],D=!1;return this}}(jQuery);