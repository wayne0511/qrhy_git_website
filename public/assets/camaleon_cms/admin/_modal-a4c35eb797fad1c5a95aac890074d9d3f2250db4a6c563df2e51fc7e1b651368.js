function open_modal(a){var t={title:"",content:null,url:null,show_footer:!1,mode:"inline",ajax_params:{},id:"ow_inline_modal",zindex:null,modal_size:"",type:"",modal_settings:{},on_submit:null,callback:function(){},on_close:function(){}};if((a=$.extend({},t,a)).id){var o=$("#"+a.id);if(o.length)return o.modal("show"),o}var e=$('<div id="'+a.id+'" class="modal fade modal-'+a.type+'"><div class="modal-dialog '+a.modal_size+'"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+a.title+'</h4></div><div class="modal-body"></div>'+(a.show_footer||a.on_submit?'<div class="modal-footer"> '+(a.on_submit?'<button type="button" class="btn btn-primary modal_submit" ><i class="fa fa-save"></i> '+I18n("button.save")+"</button>":"")+' <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-arrow-circle-down"></i> '+I18n("button.close")+"</button></div>":"")+"</div></div></div>");return e.on("hidden.bs.modal",function(t){a.on_close(e),$(t.currentTarget).attr("data-skip_destroy")||$(t.currentTarget).remove(),modal_fix_multiple()}),a.zindex&&e.css("z-index",a.zindex),a.on_submit&&e.find(".modal-footer .modal_submit").click(function(){a.on_submit(e)}),e.on("show.bs.modal",function(){e.find(".modal-title").text()||e.find(".modal-header .close").css("margin-top","-9px"),a.callback(e)}),"inline"==a.mode?(e.find(".modal-body").html(a.content),e.modal(a.modal_settings)):"iframe"==a.mode?(e.find(".modal-body").html('<iframe id="ow_inline_modal_iframe" style="min-height: 500px;" src="'+a.url+'" width="100%" frameborder=0></iframe>'),e.modal(a.modal_settings)):(showLoading(),$.get(a.url,a.ajax_params,function(t){e.find(".modal-body").html(t),hideLoading(),e.modal(a.modal_settings)})),e}function showLoading(){$.fn.customLoading("show")}function hideLoading(){$.fn.customLoading("hide")}jQuery(function(){$.fn.ajax_modal=function(e){return $(this).click(function(t){var a=$(this).attr("title"),o={title:(a=""==a?$(this).attr("data-original-title"):a)||$(this).data("title"),mode:"ajax",url:$(this).attr("href"),show_footer:$(this).data("show_footer")};$(this).attr("data-modal_size")&&(o.modal_size=$(this).attr("data-modal_size")),open_modal($.extend({},o,e)),t.preventDefault()}),this},$.fn.alert=function(t){hideLoading();var a={title:I18n("msg.updated_success"),type:"success",zindex:"99999999",id:"cama_alert_modal"};"error"==(t=$.extend(a,t||{})).type&&(t.type="danger"),"alert"==t.type&&(t.type="warning"),t.content||(t.content=t.title,t.title=""),open_modal(t)}}),jQuery(function(){$.fn.customLoading2=function(t){t||(t="show"),"string"==typeof t&&(t={state:t});var a=$.extend({},{percentage:100,state:"show"},t);"show"==a.state?0==$("body > #custom_loading").length?$("body").append('<div id="custom_loading" style="position: fixed; z-index: 99999; width: 100%; top: 0px; height: 15px;" class="progress"><div class="progress-bar progress-bar-striped active progress-bar-success" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: '+a.percentage+'%;"><span class="sr-only">45% Complete</span></div></div>'):$("body > #custom_loading").width(a.percentage):$("body > #custom_loading").remove()},$.fn.customLoading=function(t){t||(t="show"),"string"==typeof t&&(t={state:t});var a=$.extend({},{percentage:100,state:"show"},t);"show"==a.state?0==$("body > #cama_custom_loading").length?$("body").append('<div id="cama_custom_loading"><div class="back_spinner"></div><div class="loader_spinner"></div></div>'):$("body > #cama_custom_loading").width(a.percentage):$("body > #cama_custom_loading").remove()}});